/*!
* surveyjs - Survey JavaScript library v0.9.10
* (c) Andrew Telnov - http://surveyjs.org/
* License: MIT (http://www.opensource.org/licenses/mit-license.php)
*/

var Survey;!function(e){var t=function(){function e(e,t){void 0===t&&(t=null),this.text=t,this.value=e}return e.setData=function(t,n){t.length=0;for(var r=0;r<n.length;r++){var o=n[r],i=new e(null);"undefined"!=typeof o.value?(i.text="undefined"!=typeof o.hasText?o.itemText:o.text,i.value=o.value):i.value=o,t.push(i)}},e.getData=function(e){for(var t=new Array,n=0;n<e.length;n++){var r=e[n];r.hasText?t.push({value:r.value,text:r.text}):t.push(r.value)}return t},e.prototype.getType=function(){return"itemvalue"},Object.defineProperty(e.prototype,"value",{get:function(){return this.itemValue},set:function(t){if(this.itemValue=t,this.itemValue){var n=this.itemValue.toString(),r=n.indexOf(e.Separator);r>-1&&(this.itemValue=n.slice(0,r),this.text=n.slice(r+1))}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasText",{get:function(){return!!this.itemText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.hasText?this.itemText:this.value?this.value.toString():null},set:function(e){this.itemText=e},enumerable:!0,configurable:!0}),e.Separator="|",e}();e.ItemValue=t;var n=function(){function e(){}return e.prototype.getType=function(){throw new Error("This method is abstract")},e}();e.Base=n;var r=function(){function e(){}return e.prototype.getText=function(){throw new Error("This method is abstract")},e}();e.SurveyError=r;var o=function(){function e(){}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return null==this.callbacks||0==this.callbacks.length},enumerable:!0,configurable:!0}),e.prototype.fire=function(e,t){if(null!=this.callbacks)for(var n=0;n<this.callbacks.length;n++){this.callbacks[n](e,t)}},e.prototype.add=function(e){null==this.callbacks&&(this.callbacks=new Array),this.callbacks.push(e)},e.prototype.remove=function(e){if(null!=this.callbacks){var t=this.callbacks.indexOf(e,0);void 0!=t&&this.callbacks.splice(t,1)}},e}();e.Event=o}(Survey||(Survey={}));var Survey;!function(e){var t=function(){function e(){}return e.prototype.loadSurvey=function(t,n){var r=new XMLHttpRequest;r.open("GET",e.serviceUrl+"/getSurvey?surveyId="+t),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onload=function(){var e=JSON.parse(r.response);n(200==r.status,e,r.response)},r.send()},e.prototype.sendResult=function(t,n,r,o,i){void 0===o&&(o=null),void 0===i&&(i=!1);var s=new XMLHttpRequest;s.open("POST",e.serviceUrl+"/post/"),s.setRequestHeader("Content-Type","application/json; charset=utf-8");var a={postId:t,surveyResult:JSON.stringify(n)};o&&(a.clientId=o),i&&(a.isPartialCompleted=!0);var u=JSON.stringify(a);s.onload=s.onerror=function(){r&&r(200==s.status,s.response)},s.send(u)},e.prototype.sendFile=function(t,n,r){var o=new XMLHttpRequest;o.onload=o.onerror=function(){r&&r(200==o.status,JSON.parse(o.response))},o.open("POST",e.serviceUrl+"/upload/",!0);var i=new FormData;i.append("file",n),i.append("postId",t),o.send(i)},e.prototype.getResult=function(t,n,r){var o=new XMLHttpRequest,i="resultId="+t+"&name="+n;o.open("GET",e.serviceUrl+"/getResult?"+i),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");o.onload=function(){var e=null,t=null;if(200==o.status){e=JSON.parse(o.response),t=[];for(var n in e.QuestionResult){var i={name:n,value:e.QuestionResult[n]};t.push(i)}}r(200==o.status,e,t,o.response)},o.send()},e.prototype.isCompleted=function(t,n,r){var o=new XMLHttpRequest,i="resultId="+t+"&clientId="+n;o.open("GET",e.serviceUrl+"/isCompleted?"+i),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");o.onload=function(){var e=null;200==o.status&&(e=JSON.parse(o.response)),r(200==o.status,e,o.response)},o.send()},e.serviceUrl="https://dxsurveyapi.azurewebsites.net/api/Survey",e}();e.dxSurveyService=t}(Survey||(Survey={}));var Survey;!function(e){e.surveyLocalization={currentLocale:"",locales:{},getString:function(t){var n=this.currentLocale?this.locales[this.currentLocale]:e.surveyStrings;return n&&n[t]||(n=e.surveyStrings),n[t]},getLocales:function(){var e=[];e.push("");for(var t in this.locales)e.push(t);return e.sort(),e}},e.surveyStrings={pagePrevText:"Previous",pageNextText:"Next",completeText:"Complete",otherItemText:"Other (describe)",progressText:"Page {0} of {1}",emptySurvey:"There is no any visible page or visible question in the survey.",completingSurvey:"Thank You for Completing the Survey!",loadingSurvey:"Survey is loading from the server...",optionsCaption:"Choose...",requiredError:"Please answer the question.",numericError:"The value should be a numeric.",textMinLength:"Please enter at least {0} symbols.",minSelectError:"Please select at least {0} variants.",maxSelectError:"Please select not more than {0} variants.",numericMinMax:"The '{0}' should be equal or more than {1} and equal or less than {2}",numericMin:"The '{0}' should be equal or more than {1}",numericMax:"The '{0}' should be equal or less than {1}",invalidEmail:"Please enter a valid e-mail.",exceedMaxSize:"The file size should not exceed {0}.",otherRequiredError:"Please enter the others value.",uploadingFile:"Your file is uploading. Please wait several seconds and try again.",addRow:"Add Row",removeRow:"Remove"},e.surveyLocalization.locales.en=e.surveyStrings,String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return"undefined"!=typeof e[n]?e[n]:t})})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(){t.call(this)}return __extends(n,t),n.prototype.getText=function(){return e.surveyLocalization.getString("requiredError")},n}(e.SurveyError);e.AnswerRequiredError=t;var n=function(t){function n(){t.call(this)}return __extends(n,t),n.prototype.getText=function(){return e.surveyLocalization.getString("numericError")},n}(e.SurveyError);e.RequreNumericError=n;var r=function(t){function n(e){t.call(this),this.maxSize=e}return __extends(n,t),n.prototype.getText=function(){return e.surveyLocalization.getString("exceedMaxSize").format(this.getTextSize())},n.prototype.getTextSize=function(){var e=["Bytes","KB","MB","GB","TB"],t=[0,0,2,3,3];if(0==this.maxSize)return"0 Byte";var n=Math.floor(Math.log(this.maxSize)/Math.log(1024)),r=this.maxSize/Math.pow(1024,n);return r.toFixed(t[n])+" "+e[n]},n}(e.SurveyError);e.ExceedSizeError=r;var o=function(e){function t(t){e.call(this),this.text=t}return __extends(t,e),t.prototype.getText=function(){return this.text},t}(e.SurveyError);e.CustomError=o}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(){function e(e){this.name=e,this.typeValue=null,this.choicesValue=null,this.choicesfunc=null,this.className=null,this.classNamePart=null,this.baseClassName=null,this.defaultValue=null,this.onGetValue=null}return Object.defineProperty(e.prototype,"type",{get:function(){return this.typeValue?this.typeValue:"string"},set:function(e){this.typeValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasToUseGetValue",{get:function(){return this.onGetValue},enumerable:!0,configurable:!0}),e.prototype.isDefaultValue=function(e){return this.defaultValue?this.defaultValue==e:!e},e.prototype.getValue=function(e){return this.onGetValue?this.onGetValue(e):null},Object.defineProperty(e.prototype,"hasToUseSetValue",{get:function(){return this.onSetValue},enumerable:!0,configurable:!0}),e.prototype.setValue=function(e,t,n){this.onSetValue&&this.onSetValue(e,t,n)},e.prototype.getObjType=function(e){return this.classNamePart?e.replace(this.classNamePart,""):e},e.prototype.getClassName=function(e){return this.classNamePart&&e.indexOf(this.classNamePart)<0?e+this.classNamePart:e},Object.defineProperty(e.prototype,"choices",{get:function(){return null!=this.choicesValue?this.choicesValue:null!=this.choicesfunc?this.choicesfunc():null},enumerable:!0,configurable:!0}),e.prototype.setChoices=function(e,t){this.choicesValue=e,this.choicesfunc=t},e}();e.JsonObjectProperty=t;var n=function(){function e(e,t,n,r){void 0===n&&(n=null),void 0===r&&(r=null),this.name=e,this.creator=n,this.parentName=r,this.properties=null,this.requiredProperties=null,this.properties=new Array;for(var o=0;o<t.length;o++){var i=this.createProperty(t[o]);i&&this.properties.push(i)}}return e.prototype.find=function(e){for(var t=0;t<this.properties.length;t++)if(this.properties[t].name==e)return this.properties[t];return null},e.prototype.createProperty=function(n){var r="string"==typeof n?n:n.name;if(r){var o=null,i=r.indexOf(e.typeSymbol);i>-1&&(o=r.substring(i+1),r=r.substring(0,i)),r=this.getPropertyName(r);var s=new t(r);if(o&&(s.type=o),"object"==typeof n){if(n.type&&(s.type=n.type),n["default"]&&(s.defaultValue=n["default"]),n.isRequired&&this.makePropertyRequired(s.name),n.choices){var a="function"==typeof n.choices?n.choices:null,u="function"!=typeof n.choices?n.choices:null;s.setChoices(u,a)}n.onGetValue&&(s.onGetValue=n.onGetValue),n.onSetValue&&(s.onSetValue=n.onSetValue),n.className&&(s.className=n.className),n.baseClassName&&(s.baseClassName=n.baseClassName),n.classNamePart&&(s.classNamePart=n.classNamePart)}return s}},e.prototype.getPropertyName=function(t){return 0==t.length||t[0]!=e.requiredSymbol?t:(t=t.slice(1),this.makePropertyRequired(t),t)},e.prototype.makePropertyRequired=function(e){this.requiredProperties||(this.requiredProperties=new Array),this.requiredProperties.push(e)},e.requiredSymbol="!",e.typeSymbol=":",e}();e.JsonMetadataClass=n;var r=function(){function e(){this.classes={},this.childrenClasses={},this.classProperties={},this.classRequiredProperties={}}return e.prototype.addClass=function(e,t,r,o){void 0===r&&(r=null),void 0===o&&(o=null);var i=new n(e,t,r,o);if(this.classes[e]=i,o){var s=this.childrenClasses[o];s||(this.childrenClasses[o]=[]),this.childrenClasses[o].push(i)}return i},e.prototype.overrideClassCreatore=function(e,t){var n=this.findClass(e);n&&(n.creator=t)},e.prototype.getProperties=function(e){var t=this.classProperties[e];return t||(t=new Array,this.fillProperties(e,t),this.classProperties[e]=t),t},e.prototype.createClass=function(e){var t=this.findClass(e);return t?t.creator():null},e.prototype.getChildrenClasses=function(e,t){void 0===t&&(t=!1);var n=[];return this.fillChildrenClasses(e,t,n),n},e.prototype.getRequiredProperties=function(e){var t=this.classRequiredProperties[e];return t||(t=new Array,this.fillRequiredProperties(e,t),this.classRequiredProperties[e]=t),t},e.prototype.fillChildrenClasses=function(e,t,n){var r=this.childrenClasses[e];if(r)for(var o=0;o<r.length;o++)t&&!r[o].creator||n.push(r[o]),this.fillChildrenClasses(r[o].name,t,n)},e.prototype.findClass=function(e){return this.classes[e]},e.prototype.fillProperties=function(e,t){var n=this.findClass(e);if(n){n.parentName&&this.fillProperties(n.parentName,t);for(var r=0;r<n.properties.length;r++)this.addProperty(n.properties[r],t,t.length)}},e.prototype.addProperty=function(e,t,n){for(var r=-1,o=0;n>o;o++)if(t[o].name==e.name){r=o;break}0>r?t.push(e):t[r]=e},e.prototype.fillRequiredProperties=function(e,t){var n=this.findClass(e);n&&(n.requiredProperties&&Array.prototype.push.apply(t,n.requiredProperties),n.parentName&&this.fillRequiredProperties(n.parentName,t))},e}();e.JsonMetadata=r;var o=function(){function e(e,t){this.type=e,this.message=t,this.description="",this.at=-1}return e.prototype.getFullDescription=function(){return this.message+(this.description?"\n"+this.description:"")},e}();e.JsonError=o;var i=function(e){function t(t,n){e.call(this,"unknownproperty","The property '"+t+"' in class '"+n+"' is unknown."),this.propertyName=t,this.className=n;var r=c.metaData.getProperties(n);if(r){this.description="The list of available properties are: ";for(var o=0;o<r.length;o++)o>0&&(this.description+=", "),this.description+=r[o].name;this.description+="."}}return __extends(t,e),t}(o);e.JsonUnknownPropertyError=i;var s=function(e){function t(t,n,r){e.call(this,n,r),this.baseClassName=t,this.type=n,this.message=r,this.description="The following types are available: ";for(var o=c.metaData.getChildrenClasses(t,!0),i=0;i<o.length;i++)i>0&&(this.description+=", "),this.description+="'"+o[i].name+"'";this.description+="."}return __extends(t,e),t}(o);e.JsonMissingTypeErrorBase=s;var a=function(e){function t(t,n){e.call(this,n,"missingtypeproperty","The property type is missing in the object. Please take a look at property: '"+t+"'."),this.propertyName=t,this.baseClassName=n}return __extends(t,e),t}(s);e.JsonMissingTypeError=a;var u=function(e){function t(t,n){e.call(this,n,"incorrecttypeproperty","The property type is incorrect in the object. Please take a look at property: '"+t+"'."),this.propertyName=t,this.baseClassName=n}return __extends(t,e),t}(s);e.JsonIncorrectTypeError=u;var l=function(e){function t(t,n){e.call(this,"requiredproperty","The property '"+t+"' is required in class '"+n+"'."),this.propertyName=t,this.className=n}return __extends(t,e),t}(o);e.JsonRequiredPropertyError=l;var c=function(){function e(){this.errors=new Array}return Object.defineProperty(e,"metaData",{get:function(){return e.metaDataValue},enumerable:!0,configurable:!0}),e.prototype.toJsonObject=function(e){return this.toJsonObjectCore(e,null)},e.prototype.toObject=function(t,n){if(t){var r=null;if(n.getType&&(r=e.metaData.getProperties(n.getType())),r)for(var o in t)if(o!=e.typePropertyName)if(o!=e.positionPropertyName){var s=this.findProperty(r,o);s?this.valueToObj(t[o],n,o,s):this.addNewError(new i(o.toString(),n.getType()),t)}else n[o]=t[o]}},e.prototype.toJsonObjectCore=function(t,n){if(!t.getType)return t;var r={};null==n||n.className||(r[e.typePropertyName]=n.getObjType(t.getType()));for(var o=e.metaData.getProperties(t.getType()),i=0;i<o.length;i++)this.valueToJson(t,r,o[i]);return r},e.prototype.valueToJson=function(e,t,n){var r=null;if(r=n.hasToUseGetValue?n.getValue(e):e[n.name],!n.isDefaultValue(r)){if(this.isValueArray(r)){for(var o=[],i=0;i<r.length;i++)o.push(this.toJsonObjectCore(r[i],n));r=o.length>0?o:null}else r=this.toJsonObjectCore(r,n);n.isDefaultValue(r)||(t[n.name]=r)}},e.prototype.valueToObj=function(e,t,n,r){if(null!=e){if(null!=r&&r.hasToUseSetValue)return void r.setValue(t,e,this);if(this.isValueArray(e))return void this.valueToArray(e,t,n,r);var o=this.createNewObj(e,r);o.newObj&&(this.toObject(e,o.newObj),e=o.newObj),o.error||(t[n]=e)}},e.prototype.isValueArray=function(e){return e.constructor.toString().indexOf("Array")>-1},e.prototype.createNewObj=function(t,n){var r={newObj:null,error:null},o=t[e.typePropertyName];return!o&&null!=n&&n.className&&(o=n.className),o=n.getClassName(o),r.newObj=o?e.metaData.createClass(o):null,r.error=this.checkNewObjectOnErrors(r.newObj,t,n,o),r},e.prototype.checkNewObjectOnErrors=function(t,n,r,o){var i=null;if(t){var s=e.metaData.getRequiredProperties(o);if(s)for(var c=0;c<s.length;c++)if(!n[s[c]]){i=new l(s[c],o);break}}else r.baseClassName&&(i=o?new u(r.name,r.baseClassName):new a(r.name,r.baseClassName));return i&&this.addNewError(i,n),i},e.prototype.addNewError=function(t,n){n&&n[e.positionPropertyName]&&(t.at=n[e.positionPropertyName].start),this.errors.push(t)},e.prototype.valueToArray=function(e,t,n,r){this.isValueArray(t[n])||(t[n]=[]);for(var o=0;o<e.length;o++){var i=this.createNewObj(e[o],r);i.newObj?(t[n].push(i.newObj),this.toObject(e[o],i.newObj)):i.error||t[n].push(e[o])}},e.prototype.findProperty=function(e,t){if(!e)return null;for(var n=0;n<e.length;n++)if(e[n].name==t)return e[n];return null},e.typePropertyName="type",e.positionPropertyName="pos",e.metaDataValue=new r,e}();e.JsonObject=c}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(n){e.call(this),this.name=n,this.visibleValue=!0,this.visibleIndexValue=-1,this.width="100%",this.indent=0,this.idValue=t.getQuestionId(),this.onCreating()}return __extends(t,e),t.getQuestionId=function(){return"sq_"+t.questionCounter++},Object.defineProperty(t.prototype,"visible",{get:function(){return this.visibleValue},set:function(e){e!=this.visible&&(this.visibleValue=e,this.fireCallback(this.visibilityChangedCallback),this.survey&&this.survey.questionVisibilityChanged(this,this.visible))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibleIndex",{get:function(){return this.visibleIndexValue},enumerable:!0,configurable:!0}),t.prototype.hasErrors=function(e){return void 0===e&&(e=!0),!1},Object.defineProperty(t.prototype,"hasTitle",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasComment",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.idValue},enumerable:!0,configurable:!0}),t.prototype.focus=function(){var e=document.getElementById(this.id);if(e&&e.scrollIntoView){var t=e.getBoundingClientRect().top;0>t&&(e.scrollIntoView(),this.fireCallback(this.focusCallback))}},t.prototype.setData=function(e){this.data=e,this.survey=e&&e.questionAdded?e:null,this.onSetData()},t.prototype.fireCallback=function(e){e&&e()},t.prototype.onSetData=function(){},t.prototype.onCreating=function(){},t.prototype.onSurveyValueChanged=function(e){},t.prototype.setVisibleIndex=function(e){this.visibleIndexValue!=e&&(this.visibleIndexValue=e,this.fireCallback(this.visibleIndexChangedCallback))},t.questionCounter=100,t}(e.Base);e.QuestionBase=t,e.JsonObject.metaData.addClass("questionbase",["!name",{name:"visible:boolean","default":!0},{name:"width","default":"100%"},{name:"indent:number","default":0,choices:[0,1,2,3]}])}(Survey||(Survey={}));var Survey;!function(e){var t=function(){function e(){this.creatorHash={}}return e.prototype.registerQuestion=function(e,t){this.creatorHash[e]=t},e.prototype.getAllTypes=function(){var e=new Array;for(var t in this.creatorHash)e.push(t);return e.sort()},e.prototype.createQuestion=function(e,t){var n=this.creatorHash[e];return null==n?null:n(t)},e.Instance=new e,e.DefaultChoices=["one","two|second value","three|third value"],e}();e.QuestionFactory=t}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){void 0===e&&(e=""),t.call(this),this.name=e,this.questions=new Array,this.data=null,this.title="",this.visibleIndex=-1,this.numValue=-1,this.visibleValue=!0;var n=this;this.questions.push=function(e){return null!=n.data&&e.setData(n.data),Array.prototype.push.call(this,e)}}return __extends(n,t),Object.defineProperty(n.prototype,"processedTitle",{get:function(){return null!=this.data?this.data.processText(this.title):this.title},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"num",{get:function(){return this.numValue},set:function(e){this.numValue!=e&&(this.numValue=e,this.onNumChanged(e))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visible",{get:function(){return this.visibleValue},set:function(e){e!==this.visible&&(this.visibleValue=e,null!=this.data&&this.data.pageVisibilityChanged(this,this.visible))},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"page"},Object.defineProperty(n.prototype,"isVisible",{get:function(){if(!this.visible)return!1;for(var e=0;e<this.questions.length;e++)if(this.questions[e].visible)return!0;return!1},enumerable:!0,configurable:!0}),n.prototype.addQuestion=function(e,t){void 0===t&&(t=-1),null!=e&&(0>t||t>=this.questions.length?this.questions.push(e):this.questions.splice(t,0,e),null!=this.data&&(e.setData(this.data),this.data.questionAdded(e,t)))},n.prototype.addNewQuestion=function(t,n){var r=e.QuestionFactory.Instance.createQuestion(t,n);return this.addQuestion(r),r},n.prototype.removeQuestion=function(e){var t=this.questions.indexOf(e);0>t||(this.questions.splice(t,1),null!=this.data&&this.data.questionRemoved(e))},n.prototype.scrollToFirstQuestion=function(){for(var e=0;e<this.questions.length;e++)if(this.questions[e].visible){this.questions[e].focus();break}},n.prototype.hasErrors=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1);for(var n=!1,r=null,o=0;o<this.questions.length;o++)this.questions[o].visible&&this.questions[o].hasErrors(e)&&(t&&null==r&&(r=this.questions[o]),n=!0);return r&&r.focus(),n},n.prototype.addQuestionsToList=function(e,t){if(void 0===t&&(t=!1),!t||this.visible)for(var n=0;n<this.questions.length;n++)t&&!this.questions[n].visible||e.push(this.questions[n])},n.prototype.onNumChanged=function(e){},n}(e.Base);e.PageModel=t,e.JsonObject.metaData.addClass("page",["name",{name:"questions",baseClassName:"question"},{name:"visible:boolean","default":!0},"title"],function(){return new t})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(){function e(e,t){void 0===t&&(t=null),this.value=e,this.error=t}return e}();e.ValidatorResult=t;var n=function(e){function t(){e.call(this),this.text=""}return __extends(t,e),t.prototype.getErrorText=function(e){return this.text?this.text:this.getDefaultErrorText(e)},t.prototype.getDefaultErrorText=function(e){return""},t.prototype.validate=function(e,t){return void 0===t&&(t=null),null},t}(e.Base);e.SurveyValidator=n;var r=function(){function e(){}return e.prototype.run=function(e){for(var t=0;t<e.validators.length;t++){var n=e.validators[t].validate(e.value,e.getValidatorTitle());if(null!=n){if(n.error)return n.error;n.value&&(e.value=n.value)}}return null},e}();e.ValidatorRunner=r;var o=function(n){function r(e,t){void 0===e&&(e=null),void 0===t&&(t=null),n.call(this),this.minValue=e,this.maxValue=t}return __extends(r,n),r.prototype.getType=function(){return"numericvalidator"},r.prototype.validate=function(n,r){if(void 0===r&&(r=null),!n||!this.isNumber(n))return new t(null,new e.RequreNumericError);var o=new t(parseFloat(n));return this.minValue&&this.minValue>o.value?(o.error=new e.CustomError(this.getErrorText(r)),o):this.maxValue&&this.maxValue<o.value?(o.error=new e.CustomError(this.getErrorText(r)),o):"number"==typeof n?null:o},r.prototype.getDefaultErrorText=function(t){var n=t?t:"value";return this.minValue&&this.maxValue?e.surveyLocalization.getString("numericMinMax").format(n,this.minValue,this.maxValue):this.minValue?e.surveyLocalization.getString("numericMin").format(n,this.minValue):e.surveyLocalization.getString("numericMax").format(n,this.maxValue)},r.prototype.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},r}(n);e.NumericValidator=o;var i=function(n){function r(e){void 0===e&&(e=0),n.call(this),this.minLength=e}return __extends(r,n),r.prototype.getType=function(){return"textvalidator"},r.prototype.validate=function(n,r){return void 0===r&&(r=null),this.minLength<=0?void 0:n.length<this.minLength?new t(null,new e.CustomError(this.getErrorText(r))):null},r.prototype.getDefaultErrorText=function(t){return e.surveyLocalization.getString("textMinLength").format(this.minLength)},r}(n);e.TextValidator=i;var s=function(n){function r(e,t){void 0===e&&(e=null),void 0===t&&(t=null),n.call(this),this.minCount=e,this.maxCount=t}return __extends(r,n),r.prototype.getType=function(){return"answercountvalidator"},r.prototype.validate=function(n,r){if(void 0===r&&(r=null),null==n||n.constructor!=Array)return null;var o=n.length;return this.minCount&&o<this.minCount?new t(null,new e.CustomError(this.getErrorText(e.surveyLocalization.getString("minSelectError").format(this.minCount)))):this.maxCount&&o>this.maxCount?new t(null,new e.CustomError(this.getErrorText(e.surveyLocalization.getString("maxSelectError").format(this.maxCount)))):null},r.prototype.getDefaultErrorText=function(e){return e},r}(n);e.AnswerCountValidator=s;var a=function(n){function r(e){void 0===e&&(e=null),n.call(this),this.regex=e}return __extends(r,n),r.prototype.getType=function(){return"regexvalidator"},r.prototype.validate=function(n,r){if(void 0===r&&(r=null),!this.regex||!n)return null;var o=new RegExp(this.regex);return o.test(n)?null:new t(n,new e.CustomError(this.getErrorText(r)))},r}(n);e.RegexValidator=a;var u=function(n){function r(){n.call(this),this.re=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i}return __extends(r,n),r.prototype.getType=function(){return"emailvalidator"},r.prototype.validate=function(n,r){return void 0===r&&(r=null),n?this.re.test(n)?null:new t(n,new e.CustomError(this.getErrorText(r))):null},r.prototype.getDefaultErrorText=function(t){return e.surveyLocalization.getString("invalidEmail")},r}(n);e.EmailValidator=u,e.JsonObject.metaData.addClass("surveyvalidator",["text"]),e.JsonObject.metaData.addClass("numericvalidator",["minValue:number","maxValue:number"],function(){return new o},"surveyvalidator"),e.JsonObject.metaData.addClass("textvalidator",["minLength:number"],function(){return new i},"surveyvalidator"),e.JsonObject.metaData.addClass("answercountvalidator",["minCount:number","maxCount:number"],function(){return new s},"surveyvalidator"),e.JsonObject.metaData.addClass("regexvalidator",["regex"],function(){return new a},"surveyvalidator"),e.JsonObject.metaData.addClass("emailvalidator",[],function(){return new u},"surveyvalidator")}(Survey||(Survey={}));var Survey;!function(e){var t=function(){function e(){}return e}(),n=function(){function e(){}return e.prototype.process=function(e){if(!e)return e;if(!this.onProcess)return e;for(var t=this.getItems(e),n=t.length-1;n>=0;n--){var r=t[n],o=this.getName(e.substring(r.start+1,r.end));if(this.canProcessName(o)&&(!this.onHasValue||this.onHasValue(o))){var i=this.onProcess(o);null==i&&(i=""),e=e.substr(0,r.start)+i+e.substr(r.end+1)}}return e},e.prototype.getItems=function(e){for(var n=[],r=e.length,o=-1,i="",s=0;r>s;s++)if(i=e[s],"{"==i&&(o=s),"}"==i){if(o>-1){var a=new t;a.start=o,a.end=s,n.push(a)}o=-1}return n},e.prototype.getName=function(e){return e?e.trim():void 0},e.prototype.canProcessName=function(e){if(!e)return!1;for(var t=0;t<e.length;t++){var n=e[t];if(" "==n||"-"==n||"&"==n)return!1}return!0},e}();e.TextPreProcessor=n}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){t.call(this,e),this.name=e,this.titleValue=null,this.isRequiredValue=!1,this.hasCommentValue=!1,this.hasOtherValue=!1,this.commentTextValue="",this.errors=[],this.validators=new Array,this.isValueChangedInSurvey=!1}return __extends(n,t),Object.defineProperty(n.prototype,"hasTitle",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.titleValue?this.titleValue:this.name},set:function(e){this.titleValue=e,this.fireCallback(this.titleChangedCallback)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"processedTitle",{get:function(){return null!=this.survey?this.survey.processText(this.title):this.title},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fullTitle",{get:function(){if(this.survey&&this.survey.questionTitleTemplate){if(!this.textPreProcessor){var t=this;this.textPreProcessor=new e.TextPreProcessor,this.textPreProcessor.onHasValue=function(e){return t.canProcessedTextValues(e.toLowerCase())},this.textPreProcessor.onProcess=function(e){return t.getProcessedTextValue(e)}}return this.textPreProcessor.process(this.survey.questionTitleTemplate)}var n=this.requiredText;return n&&(n+=" "),this.no+". "+n+this.processedTitle},enumerable:!0,configurable:!0}),n.prototype.canProcessedTextValues=function(e){return"no"==e||"title"==e||"require"==e},n.prototype.getProcessedTextValue=function(e){return"no"==e?this.no:"title"==e?this.processedTitle:"require"==e?this.requiredText:null},n.prototype.supportComment=function(){return!1},n.prototype.supportOther=function(){return!1},Object.defineProperty(n.prototype,"isRequired",{get:function(){return this.isRequiredValue},set:function(e){this.isRequiredValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasComment",{get:function(){return this.hasCommentValue},set:function(e){this.supportComment()&&(this.hasCommentValue=e,this.hasComment&&(this.hasOther=!1))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"commentText",{get:function(){return this.commentTextValue?this.commentTextValue:e.surveyLocalization.getString("otherItemText")},set:function(e){this.commentTextValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasOther",{get:function(){return this.hasOtherValue},set:function(e){this.supportOther()&&(this.hasOtherValue=e,this.hasOther&&(this.hasComment=!1))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"no",{get:function(){if(this.visibleIndex<0)return"";var e=1,t=!0,n="";return this.survey&&this.survey.questionStartIndex&&(n=this.survey.questionStartIndex,parseInt(n)?e=parseInt(n):1==n.length&&(t=!1)),t?(this.visibleIndex+e).toString():String.fromCharCode(n.charCodeAt(0)+this.visibleIndex)},enumerable:!0,configurable:!0}),n.prototype.onSetData=function(){t.prototype.onSetData.call(this),this.onSurveyValueChanged(this.value)},Object.defineProperty(n.prototype,"value",{get:function(){return this.valueFromData(this.getValueCore())},set:function(e){this.setNewValue(e),this.fireCallback(this.valueChangedCallback)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"comment",{get:function(){return this.getComment()},set:function(e){this.comment!=e&&(this.setComment(e),this.fireCallback(this.commentChangedCallback))},enumerable:!0,configurable:!0}),n.prototype.getComment=function(){return null!=this.data?this.data.getComment(this.name):this.questionComment},n.prototype.setComment=function(e){this.setNewComment(e)},n.prototype.isEmpty=function(){return null==this.value},n.prototype.hasErrors=function(e){return void 0===e&&(e=!0),this.checkForErrors(e),this.errors.length>0},Object.defineProperty(n.prototype,"requiredText",{get:function(){return null!=this.survey&&this.isRequired?this.survey.requiredText:""},enumerable:!0,configurable:!0}),n.prototype.checkForErrors=function(e){var t=this.errors?this.errors.length:0;if(this.errors=[],this.onCheckForErrors(this.errors),0==this.errors.length){var n=this.runValidators();n&&this.errors.push(n)}if(this.survey&&0==this.errors.length){var n=this.survey.validateQuestion(this.name);n&&this.errors.push(n)}e&&(t!=this.errors.length||t>0)&&this.fireCallback(this.errorsChangedCallback)},n.prototype.onCheckForErrors=function(t){this.hasRequiredError()&&this.errors.push(new e.AnswerRequiredError)},n.prototype.hasRequiredError=function(){return this.isRequired&&this.isEmpty()},n.prototype.runValidators=function(){return(new e.ValidatorRunner).run(this)},n.prototype.setNewValue=function(e){this.setNewValueInData(e),this.onValueChanged()},n.prototype.setNewValueInData=function(e){this.isValueChangedInSurvey||(e=this.valueToData(e),this.setValueCore(e))},n.prototype.getValueCore=function(){return null!=this.data?this.data.getValue(this.name):this.questionValue},n.prototype.setValueCore=function(e){null!=this.data?this.data.setValue(this.name,e):this.questionValue=e;
},n.prototype.valueFromData=function(e){return e},n.prototype.valueToData=function(e){return e},n.prototype.onValueChanged=function(){},n.prototype.setNewComment=function(e){null!=this.data?this.data.setComment(this.name,e):this.questionComment=e},n.prototype.onSurveyValueChanged=function(e){this.isValueChangedInSurvey=!0,this.value=this.valueFromData(e),this.fireCallback(this.commentChangedCallback),this.isValueChangedInSurvey=!1},n.prototype.getValidatorTitle=function(){return null},n}(e.QuestionBase);e.Question=t,e.JsonObject.metaData.addClass("question",[{name:"title",onGetValue:function(e){return e.titleValue}},{name:"commentText",onGetValue:function(e){return e.commentTextValue}},"isRequired:boolean",{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"}],null,"questionbase")}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(n){t.call(this,n),this.otherItem=new e.ItemValue("other",e.surveyLocalization.getString("otherItemText")),this.choicesValues=new Array,this.otherErrorText=null,this.storeOthersAsComment=!0,this.choicesOrderValue="none",this.isSettingComment=!1}return __extends(n,t),Object.defineProperty(n.prototype,"isOtherSelected",{get:function(){return this.getStoreOthersAsComment()?this.getHasOther(this.value):this.getHasOther(this.cachedValue)},enumerable:!0,configurable:!0}),n.prototype.getHasOther=function(e){return e==this.otherItem.value},n.prototype.getComment=function(){return this.getStoreOthersAsComment()?t.prototype.getComment.call(this):this.commentValue},n.prototype.setComment=function(e){this.getStoreOthersAsComment()?t.prototype.setComment.call(this,e):this.isSettingComment||e==this.commentValue||(this.isSettingComment=!0,this.commentValue=e,this.isOtherSelected&&this.setNewValueInData(this.cachedValue),this.isSettingComment=!1)},n.prototype.valueFromData=function(e){return this.getStoreOthersAsComment()?t.prototype.valueFromData.call(this,e):(this.cachedValue=this.valueFromDataCore(e),this.cachedValue)},n.prototype.valueToData=function(e){return this.getStoreOthersAsComment()?t.prototype.valueToData.call(this,e):(this.cachedValue=e,this.valueToDataCore(e))},n.prototype.valueFromDataCore=function(e){return this.hasUnknownValue(e)?e==this.otherItem.value?e:(this.comment=e,this.otherItem.value):e},n.prototype.valueToDataCore=function(e){return e==this.otherItem.value&&this.getComment()&&(e=this.getComment()),e},n.prototype.hasUnknownValue=function(e){if(!e)return!1;for(var t=0;t<this.choicesValues.length;t++)if(this.choicesValues[t].value==e)return!1;return!0},Object.defineProperty(n.prototype,"choices",{get:function(){return this.choicesValues},set:function(t){e.ItemValue.setData(this.choicesValues,t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"choicesOrder",{get:function(){return this.choicesOrderValue},set:function(e){e!=this.choicesOrderValue&&(this.choicesOrderValue=e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"otherText",{get:function(){return this.otherItem.text},set:function(e){this.otherItem.text=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibleChoices",{get:function(){if(!this.hasOther&&"none"==this.choicesOrder)return this.choices;var e=this.sortVisibleChoices(this.choices.slice());return this.hasOther&&e.push(this.otherItem),e},enumerable:!0,configurable:!0}),n.prototype.supportComment=function(){return!0},n.prototype.supportOther=function(){return!0},n.prototype.onCheckForErrors=function(n){if(t.prototype.onCheckForErrors.call(this,n),this.isOtherSelected&&!this.comment){var r=this.otherErrorText;r||(r=e.surveyLocalization.getString("otherRequiredError")),n.push(new e.CustomError(r))}},n.prototype.getStoreOthersAsComment=function(){return this.storeOthersAsComment&&(null!=this.survey?this.survey.storeOthersAsComment:!0)},n.prototype.sortVisibleChoices=function(e){var t=this.choicesOrder.toLowerCase();return"asc"==t?this.sortArray(e,1):"desc"==t?this.sortArray(e,-1):"random"==t?this.randomizeArray(e):e},n.prototype.sortArray=function(e,t){return e.sort(function(e,n){return e.text<n.text?-1*t:e.text>n.text?1*t:0})},n.prototype.randomizeArray=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e},n}(e.Question);e.QuestionSelectBase=t;var n=function(e){function t(t){e.call(this,t),this.name=t,this.colCountValue=1}return __extends(t,e),Object.defineProperty(t.prototype,"colCount",{get:function(){return this.colCountValue},set:function(e){0>e||e>4||(this.colCountValue=e,this.fireCallback(this.colCountChangedCallback))},enumerable:!0,configurable:!0}),t}(t);e.QuestionCheckboxBase=n,e.JsonObject.metaData.addClass("selectbase",["hasComment:boolean","hasOther:boolean",{name:"!choices:itemvalues",onGetValue:function(t){return e.ItemValue.getData(t.choices)},onSetValue:function(t,n){e.ItemValue.setData(t.choices,n)}},{name:"choicesOrder","default":"none",choices:["none","asc","desc","random"]},{name:"otherText","default":e.surveyLocalization.getString("otherItemText")},"otherErrorText",{name:"storeOthersAsComment:boolean","default":!0}],null,"question"),e.JsonObject.metaData.addClass("checkboxbase",[{name:"colCount:number","default":1,choices:[0,1,2,3,4]}],null,"selectbase")}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t),this.name=t}return __extends(t,e),t.prototype.getHasOther=function(e){return e?e.indexOf(this.otherItem.value)>=0:!1},t.prototype.valueFromDataCore=function(e){if(!e||!e.length)return e;for(var t=0;t<e.length;t++){if(e[t]==this.otherItem.value)return e;if(this.hasUnknownValue(e[t])){this.comment=e[t];var n=e.slice();return n[t]=this.otherItem.value,n}}return e},t.prototype.valueToDataCore=function(e){if(!e||!e.length)return e;for(var t=0;t<e.length;t++)if(e[t]==this.otherItem.value&&this.getComment()){var n=e.slice();return n[t]=this.getComment(),n}return e},t.prototype.getType=function(){return"checkbox"},t}(e.QuestionCheckboxBase);e.QuestionCheckboxModel=t,e.JsonObject.metaData.addClass("checkbox",[],function(){return new t("")},"checkboxbase"),e.QuestionFactory.Instance.registerQuestion("checkbox",function(n){var r=new t(n);return r.choices=e.QuestionFactory.DefaultChoices,r})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t),this.name=t,this.rows=4,this.cols=50}return __extends(t,e),t.prototype.getType=function(){return"comment"},t.prototype.isEmpty=function(){return e.prototype.isEmpty.call(this)||""==this.value},t}(e.Question);e.QuestionCommentModel=t,e.JsonObject.metaData.addClass("comment",[{name:"cols:number","default":50},{name:"rows:number","default":4}],function(){return new t("")},"question"),e.QuestionFactory.Instance.registerQuestion("comment",function(e){return new t(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){t.call(this,e),this.name=e}return __extends(n,t),Object.defineProperty(n.prototype,"optionsCaption",{get:function(){return this.optionsCaptionValue?this.optionsCaptionValue:e.surveyLocalization.getString("optionsCaption")},set:function(e){this.optionsCaptionValue=e},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"dropdown"},n}(e.QuestionSelectBase);e.QuestionDropdownModel=t,e.JsonObject.metaData.addClass("dropdown",[{name:"optionsCaption",onGetValue:function(e){return e.optionsCaptionValue}}],function(){return new t("")},"selectbase"),e.QuestionFactory.Instance.registerQuestion("dropdown",function(n){var r=new t(n);return r.choices=e.QuestionFactory.DefaultChoices,r})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){t.call(this,e),this.name=e,this.showPreviewValue=!1,this.isUploading=!1}return __extends(n,t),n.prototype.getType=function(){return"file"},Object.defineProperty(n.prototype,"showPreview",{get:function(){return this.showPreviewValue},set:function(e){this.showPreviewValue=e},enumerable:!0,configurable:!0}),n.prototype.loadFile=function(e){var t=this;this.survey&&!this.survey.uploadFile(this.name,e,this.storeDataAsText,function(e){t.isUploading="uploading"==e})||this.setFileValue(e)},n.prototype.setFileValue=function(e){if(FileReader&&(this.showPreview||this.storeDataAsText)&&!this.checkFileForErrors(e)){var t=new FileReader,n=this;t.onload=function(r){n.showPreview&&(n.previewValue=n.isFileImage(e)?t.result:null,n.fireCallback(n.previewValueLoadedCallback)),n.storeDataAsText&&(n.value=t.result)},t.readAsDataURL(e)}},n.prototype.onCheckForErrors=function(n){t.prototype.onCheckForErrors.call(this,n),this.isUploading&&this.errors.push(new e.CustomError(e.surveyLocalization.getString("uploadingFile")))},n.prototype.checkFileForErrors=function(t){var n=this.errors?this.errors.length:0;return this.errors=[],this.maxSize>0&&t.size>this.maxSize&&this.errors.push(new e.ExceedSizeError(this.maxSize)),(n!=this.errors.length||this.errors.length>0)&&this.fireCallback(this.errorsChangedCallback),this.errors.length>0},n.prototype.isFileImage=function(e){if(e&&e.type){var t=e.type.toLowerCase();return 0==t.indexOf("image")}},n}(e.Question);e.QuestionFileModel=t,e.JsonObject.metaData.addClass("file",["showPreview:boolean","imageHeight","imageWidth","storeDataAsText:boolean","maxSize:number"],function(){return new t("")},"question"),e.QuestionFactory.Instance.registerQuestion("file",function(e){return new t(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t),this.name=t}return __extends(t,e),t.prototype.getType=function(){return"html"},Object.defineProperty(t.prototype,"html",{get:function(){return this.htmlValue},set:function(e){this.htmlValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"processedHtml",{get:function(){return this.survey?this.survey.processHtml(this.html):this.html},enumerable:!0,configurable:!0}),t}(e.QuestionBase);e.QuestionHtmlModel=t,e.JsonObject.metaData.addClass("html",["html:html"],function(){return new t("")},"questionbase"),e.QuestionFactory.Instance.registerQuestion("html",function(e){return new t(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t,n,r,o,i){e.call(this),this.name=t,this.text=n,this.fullName=r,this.data=o,this.rowValue=i}return __extends(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.rowValue},set:function(e){this.rowValue=e,this.data&&this.data.onMatrixRowChanged(this),this.onValueChanged()},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(){},t}(e.Base);e.MatrixRowModel=t;var n=function(n){function r(e){n.call(this,e),this.name=e,this.columnsValue=[],this.rowsValue=[],this.isRowChanging=!1}return __extends(r,n),r.prototype.getType=function(){return"matrix"},Object.defineProperty(r.prototype,"hasRows",{get:function(){return this.rowsValue.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columns",{get:function(){return this.columnsValue},set:function(t){e.ItemValue.setData(this.columnsValue,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rows",{get:function(){return this.rowsValue},set:function(t){e.ItemValue.setData(this.rowsValue,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"visibleRows",{get:function(){var e=new Array,t=this.value;t||(t={});for(var n=0;n<this.rows.length;n++)this.rows[n].value&&e.push(this.createMatrixRow(this.rows[n].value,this.rows[n].text,this.name+"_"+this.rows[n].value.toString(),t[this.rows[n].value]));return 0==e.length&&e.push(this.createMatrixRow(null,"",this.name,t)),this.generatedVisibleRows=e,e},enumerable:!0,configurable:!0}),r.prototype.createMatrixRow=function(e,n,r,o){return new t(e,n,r,this,o)},r.prototype.onValueChanged=function(){if(!this.isRowChanging&&this.generatedVisibleRows&&0!=this.generatedVisibleRows.length){this.isRowChanging=!0;var e=this.value;if(e||(e={}),0==this.rows.length)this.generatedVisibleRows[0].value=e;else for(var t=0;t<this.generatedVisibleRows.length;t++){var n=this.generatedVisibleRows[t],r=e[n.name]?e[n.name]:null;this.generatedVisibleRows[t].value=r}this.isRowChanging=!1}},r.prototype.onMatrixRowChanged=function(e){if(!this.isRowChanging){if(this.isRowChanging=!0,this.hasRows){var t=this.value;t||(t={}),t[e.name]=e.value,this.setNewValue(t)}else this.setNewValue(e.value);this.isRowChanging=!1}},r}(e.Question);e.QuestionMatrixModel=n,e.JsonObject.metaData.addClass("matrix",[{name:"columns:itemvalues",onGetValue:function(t){return e.ItemValue.getData(t.columns)},onSetValue:function(e,t){e.columns=t}},{name:"rows:itemvalues",onGetValue:function(t){return e.ItemValue.getData(t.rows)},onSetValue:function(e,t){e.rows=t}}],function(){return new n("")},"question"),e.QuestionFactory.Instance.registerQuestion("matrix",function(e){var t=new n(e);return t.rows=["Row 1","Row 2"],t.columns=["Column 1","Column 2","Column 3"],t})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t),this.name=t}return __extends(t,e),t.prototype.getType=function(){return"radiogroup"},t}(e.QuestionCheckboxBase);e.QuestionRadiogroupModel=t,e.JsonObject.metaData.addClass("radiogroup",[],function(){return new t("")},"checkboxbase"),e.QuestionFactory.Instance.registerQuestion("radiogroup",function(n){var r=new t(n);return r.choices=e.QuestionFactory.DefaultChoices,r})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t){e.call(this,t),this.name=t,this.size=25}return __extends(t,e),t.prototype.getType=function(){return"text"},t.prototype.isEmpty=function(){return e.prototype.isEmpty.call(this)||""==this.value},t}(e.Question);e.QuestionTextModel=t,e.JsonObject.metaData.addClass("text",[{name:"size:number","default":25}],function(){return new t("")},"question"),e.QuestionFactory.Instance.registerQuestion("text",function(e){return new t(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e,n){void 0===n&&(n=null),t.call(this),this.name=e,this.choicesValue=[],this.isRequired=!1,this.hasOther=!1,this.minWidth="",this.cellType="default",this.colCountValue=-1}return __extends(n,t),n.prototype.getType=function(){return"matrixdropdowncolumn"},Object.defineProperty(n.prototype,"title",{get:function(){return this.titleValue?this.titleValue:this.name},set:function(e){this.titleValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"choices",{get:function(){return this.choicesValue},set:function(t){e.ItemValue.setData(this.choicesValue,t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"colCount",{get:function(){return this.colCountValue},set:function(e){-1>e||e>4||(this.colCountValue=e)},enumerable:!0,configurable:!0}),n}(e.Base);e.MatrixDropdownColumn=t;var n=function(){function e(e,t,n){this.column=e,this.row=t,this.questionValue=n.createQuestion(this.row,this.column),this.questionValue.setData(t)}return Object.defineProperty(e.prototype,"question",{get:function(){return this.questionValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.question.value},set:function(e){this.question.value=e},enumerable:!0,configurable:!0}),e}();e.MatrixDropdownCell=n;var r=function(){function e(e,t){this.rowValues={},this.rowComments={},this.isSettingValue=!1,this.cells=[],this.data=e,this.value=t,this.buildCells()}return Object.defineProperty(e.prototype,"rowName",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.rowValues},set:function(e){if(this.isSettingValue=!0,this.rowValues={},null!=e)for(var t in e)this.rowValues[t]=e[t];for(var n=0;n<this.cells.length;n++)this.cells[n].question.onSurveyValueChanged(this.getValue(this.cells[n].column.name));this.isSettingValue=!1},enumerable:!0,configurable:!0}),e.prototype.getValue=function(e){return this.rowValues[e]},e.prototype.setValue=function(e,t){this.isSettingValue||(""===t&&(t=null),null!=t?this.rowValues[e]=t:delete this.rowValues[e],this.data.onRowChanged(this,this.value))},e.prototype.getComment=function(e){return this.rowComments[e]},e.prototype.setComment=function(e,t){this.rowComments[e]=t},e.prototype.buildCells=function(){for(var e=this.data.columns,t=0;t<e.length;t++){var n=e[t];this.cells.push(this.createCell(n))}},e.prototype.createCell=function(e){return new n(e,this,this.data)},e}();e.MatrixDropdownRowModelBase=r;var o=function(n){function r(e){n.call(this,e),this.name=e,this.columnsValue=[],this.choicesValue=[],this.isRowChanging=!1,this.horizontalScroll=!1,this.cellTypeValue="dropdown",this.columnColCountValue=0,this.columnMinWidth=""}return __extends(r,n),r.prototype.getType=function(){return"matrixdropdownbase"},Object.defineProperty(r.prototype,"columns",{get:function(){return this.columnsValue},set:function(e){this.columnsValue=e,this.fireCallback(this.columnsChangedCallback)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cellType",{get:function(){return this.cellTypeValue},set:function(e){this.cellType!=e&&(this.cellTypeValue=e,this.fireCallback(this.updateCellsCallbak))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"columnColCount",{get:function(){return this.columnColCountValue},set:function(e){0>e||e>4||(this.columnColCountValue=e,this.fireCallback(this.updateCellsCallbak))},enumerable:!0,configurable:!0}),r.prototype.getColumnTitle=function(e){var t=e.title;if(e.isRequired&&this.survey){var n=this.survey.requiredText;n&&(n+=" "),t=n+t}return t},r.prototype.getColumnWidth=function(e){return e.minWidth?e.minWidth:this.columnMinWidth},Object.defineProperty(r.prototype,"choices",{get:function(){return this.choicesValue},set:function(t){e.ItemValue.setData(this.choicesValue,t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"optionsCaption",{get:function(){return this.optionsCaptionValue?this.optionsCaptionValue:e.surveyLocalization.getString("optionsCaption")},set:function(e){this.optionsCaptionValue=e},enumerable:!0,configurable:!0}),r.prototype.addColumn=function(e,n){void 0===n&&(n=null);var r=new t(e,n);return this.columnsValue.push(r),r},Object.defineProperty(r.prototype,"visibleRows",{get:function(){return this.generatedVisibleRows=this.generateRows(),this.generatedVisibleRows},enumerable:!0,configurable:!0}),r.prototype.generateRows=function(){return null},r.prototype.createMatrixRow=function(e,t,n){return null},r.prototype.createNewValue=function(e){return e?e:{}},r.prototype.getRowValue=function(e,t,n){void 0===n&&(n=!1);var r=t[e.rowName]?t[e.rowName]:null;return!r&&n&&(r={},t[e.rowName]=r),r},r.prototype.onValueChanged=function(){if(!this.isRowChanging&&this.generatedVisibleRows&&0!=this.generatedVisibleRows.length){this.isRowChanging=!0;for(var e=this.createNewValue(this.value),t=0;t<this.generatedVisibleRows.length;t++){var n=this.generatedVisibleRows[t];this.generatedVisibleRows[t].value=this.getRowValue(n,e)}this.isRowChanging=!1}},r.prototype.hasErrors=function(e){void 0===e&&(e=!0);var t=this.hasErrorInCells(e);return n.prototype.hasErrors.call(this,e)||t},r.prototype.hasErrorInCells=function(e){if(!this.generatedVisibleRows)return!1;for(var t=!1,n=0;n<this.columns.length;n++)for(var r=0;r<this.generatedVisibleRows.length;r++){var o=this.generatedVisibleRows[r].cells;t=o&&o[n]&&o[n].question&&o[n].question.hasErrors(e)||t}return t},r.prototype.createQuestion=function(t,n){var r=this.createQuestionCore(t,n);return r.name=n.name,r.isRequired=n.isRequired,r.hasOther=n.hasOther,n.hasOther&&r instanceof e.QuestionSelectBase&&(r.storeOthersAsComment=!1),r},r.prototype.createQuestionCore=function(e,t){var n="default"==t.cellType?this.cellType:t.cellType,r=this.getQuestionName(e,t);return"checkbox"==n?this.createCheckbox(r,t):"radiogroup"==n?this.createRadiogroup(r,t):"text"==n?this.createText(r,t):"comment"==n?this.createComment(r,t):this.createDropdown(r,t)},r.prototype.getQuestionName=function(e,t){return e.rowName+"_"+t.name},r.prototype.getColumnChoices=function(e){return e.choices&&e.choices.length>0?e.choices:this.choices},r.prototype.getColumnOptionsCaption=function(e){return e.optionsCaption?e.optionsCaption:this.optionsCaption},r.prototype.createDropdown=function(e,t){var n=this.createCellQuestion("dropdown",e);return n.choices=this.getColumnChoices(t),n.optionsCaption=this.getColumnOptionsCaption(t),n},r.prototype.createCheckbox=function(e,t){var n=this.createCellQuestion("checkbox",e);return n.choices=this.getColumnChoices(t),n.colCount=t.colCount>-1?t.colCount:this.columnColCount,n},r.prototype.createRadiogroup=function(e,t){var n=this.createCellQuestion("radiogroup",e);return n.choices=this.getColumnChoices(t),n.colCount=t.colCount>-1?t.colCount:this.columnColCount,n},r.prototype.createText=function(e,t){return this.createCellQuestion("text",e)},r.prototype.createComment=function(e,t){return this.createCellQuestion("comment",e)},r.prototype.createCellQuestion=function(t,n){return e.QuestionFactory.Instance.createQuestion(t,n)},r.prototype.deleteRowValue=function(e,t){return delete e[t.rowName],0==Object.keys(e).length?null:e},r.prototype.onRowChanged=function(e,t){var n=this.createNewValue(this.value),r=this.getRowValue(e,n,!0);for(var o in r)delete r[o];if(t){t=JSON.parse(JSON.stringify(t));for(var o in t)r[o]=t[o]}0==Object.keys(r).length&&(n=this.deleteRowValue(n,e)),this.isRowChanging=!0,this.setNewValue(n),this.isRowChanging=!1},r}(e.Question);e.QuestionMatrixDropdownModelBase=o,e.JsonObject.metaData.addClass("matrixdropdowncolumn",["name",{name:"title",onGetValue:function(e){return e.titleValue}},{name:"choices:itemvalues",onGetValue:function(t){return e.ItemValue.getData(t.choices)},onSetValue:function(e,t){e.choices=t}},"optionsCaption",{name:"cellType","default":"default",choices:["default","dropdown","checkbox","radiogroup","text","comment"]},{name:"colCount","default":-1,choices:[-1,0,1,2,3,4]},"isRequired:boolean","hasOther:boolean","minWidth"],function(){return new t("")}),e.JsonObject.metaData.addClass("matrixdropdownbase",[{name:"columns:matrixdropdowncolumns",className:"matrixdropdowncolumn"},"horizontalScroll:boolean",{name:"choices:itemvalues",onGetValue:function(t){return e.ItemValue.getData(t.choices)},onSetValue:function(e,t){e.choices=t}},{name:"optionsCaption",onGetValue:function(e){return e.optionsCaptionValue}},{name:"cellType","default":"dropdown",choices:["dropdown","checkbox","radiogroup","text","comment"]},{name:"columnColCount","default":0,choices:[0,1,2,3,4]},"columnMinWidth"],function(){return new o("")},"question")}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t,n,r,o){e.call(this,r,o),this.name=t,this.text=n}return __extends(t,e),Object.defineProperty(t.prototype,"rowName",{get:function(){return this.name},enumerable:!0,configurable:!0}),t}(e.MatrixDropdownRowModelBase);e.MatrixDropdownRowModel=t;var n=function(n){function r(e){n.call(this,e),this.name=e,this.rowsValue=[]}return __extends(r,n),r.prototype.getType=function(){return"matrixdropdown"},Object.defineProperty(r.prototype,"rows",{get:function(){return this.rowsValue},set:function(t){e.ItemValue.setData(this.rowsValue,t)},enumerable:!0,configurable:!0}),r.prototype.generateRows=function(){var e=new Array;if(!this.rows||0===this.rows.length)return e;var t=this.value;t||(t={});for(var n=0;n<this.rows.length;n++)this.rows[n].value&&e.push(this.createMatrixRow(this.rows[n].value,this.rows[n].text,t[this.rows[n].value]));return e},r.prototype.createMatrixRow=function(e,n,r){return new t(e,n,this,r)},r}(e.QuestionMatrixDropdownModelBase);e.QuestionMatrixDropdownModel=n,e.JsonObject.metaData.addClass("matrixdropdown",[{name:"rows:itemvalues",onGetValue:function(t){return e.ItemValue.getData(t.rows)},onSetValue:function(e,t){e.rows=t}}],function(){return new n("")},"matrixdropdownbase"),e.QuestionFactory.Instance.registerQuestion("matrixdropdown",function(e){var t=new n(e);return t.choices=[1,2,3,4,5],t.rows=["Row 1","Row 2"],t.addColumn("Column 1"),t.addColumn("Column 2"),t.addColumn("Column 3"),t})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t,n,r){e.call(this,n,r),this.index=t}return __extends(t,e),Object.defineProperty(t.prototype,"rowName",{get:function(){return"row"+this.index},enumerable:!0,configurable:!0}),t}(e.MatrixDropdownRowModelBase);e.MatrixDynamicRowModel=t;var n=function(n){function r(e){n.call(this,e),this.name=e,this.rowCounter=0,this.rowCountValue=2,this.addRowTextValue=null}return __extends(r,n),r.prototype.getType=function(){return"matrixdynamic"},Object.defineProperty(r.prototype,"rowCount",{get:function(){return this.rowCountValue},set:function(e){if(!(0>e||e>r.MaxRowCount)){if(this.rowCountValue=e,this.value&&this.value.length>e){var t=this.value;t.splice(e),this.value=t}this.fireCallback(this.rowCountChangedCallback)}},enumerable:!0,configurable:!0}),r.prototype.addRow=function(){this.generatedVisibleRows&&this.generatedVisibleRows.push(this.createMatrixRow(null)),this.rowCount++},r.prototype.removeRow=function(e){if(!(0>e||e>=this.rowCount)){if(this.generatedVisibleRows&&e<this.generatedVisibleRows.length&&this.generatedVisibleRows.splice(e,1),this.value){var t=this.createNewValue(this.value);t.splice(e,1),t=this.deleteRowValue(t,null),this.value=t}this.rowCount--}},Object.defineProperty(r.prototype,"addRowText",{get:function(){return this.addRowTextValue?this.addRowTextValue:e.surveyLocalization.getString("addRow")},set:function(e){this.addRowTextValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"removeRowText",{get:function(){return e.surveyLocalization.getString("removeRow")},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"cachedVisibleRows",{get:function(){return this.generatedVisibleRows&&this.generatedVisibleRows.length==this.rowCount?this.generatedVisibleRows:this.visibleRows},enumerable:!0,configurable:!0}),r.prototype.generateRows=function(){var e=new Array;if(0===this.rowCount)return e;for(var t=this.createNewValue(this.value),n=0;n<this.rowCount;n++)e.push(this.createMatrixRow(this.getRowValueByIndex(t,n)));return e},r.prototype.createMatrixRow=function(e){return new t(this.rowCounter++,this,e)},r.prototype.createNewValue=function(e){var t=e;t||(t=[]);t.length>this.rowCount&&t.splice(this.rowCount-1);for(var n=t.length;n<this.rowCount;n++)t.push({});return t},r.prototype.deleteRowValue=function(e,t){for(var n=!0,r=0;r<e.length;r++)if(Object.keys(e[r]).length>0){n=!1;break}return n?null:e},r.prototype.getRowValueByIndex=function(e,t){return t>=0&&t<e.length?e[t]:null},r.prototype.getRowValue=function(e,t,n){return void 0===n&&(n=!1),this.getRowValueByIndex(t,this.generatedVisibleRows.indexOf(e))},r.MaxRowCount=100,r}(e.QuestionMatrixDropdownModelBase);e.QuestionMatrixDynamicModel=n,e.JsonObject.metaData.addClass("matrixdynamic",[{name:"rowCount:number","default":2},{name:"addRowText",onGetValue:function(e){return e.addRowTextValue}}],function(){return new n("")},"matrixdropdownbase"),e.QuestionFactory.Instance.registerQuestion("matrixdynamic",function(e){var t=new n(e);return t.choices=[1,2,3,4,5],t.addColumn("Column 1"),t.addColumn("Column 2"),t.addColumn("Column 3"),t})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(t,n){void 0===t&&(t=null),void 0===n&&(n=null),e.call(this),this.name=t,this.validators=new Array,this.title=n}return __extends(t,e),t.prototype.getType=function(){return"multipletextitem"},t.prototype.setData=function(e){this.data=e},Object.defineProperty(t.prototype,"title",{get:function(){return this.titleValue?this.titleValue:this.name},set:function(e){this.titleValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return this.data?this.data.getMultipleTextValue(this.name):null},set:function(e){null!=this.data&&this.data.setMultipleTextValue(this.name,e)},enumerable:!0,configurable:!0}),t.prototype.onValueChanged=function(e){},t.prototype.getValidatorTitle=function(){return this.title},t}(e.Base);e.MultipleTextItemModel=t;var n=function(n){function r(e){n.call(this,e),this.name=e,this.colCountValue=1,this.itemSize=25,this.itemsValues=new Array,this.isMultipleItemValueChanging=!1;var t=this;this.items.push=function(e){e.setData(t);var n=Array.prototype.push.call(this,e);return t.fireCallback(t.colCountChangedCallback),n}}return __extends(r,n),r.prototype.getType=function(){return"multipletext"},Object.defineProperty(r.prototype,"items",{get:function(){return this.itemsValues},set:function(e){this.itemsValues=e,this.fireCallback(this.colCountChangedCallback)},enumerable:!0,configurable:!0}),r.prototype.AddItem=function(e,t){void 0===t&&(t=null);var n=this.createTextItem(e,t);return this.items.push(n),n},Object.defineProperty(r.prototype,"colCount",{get:function(){return this.colCountValue},set:function(e){1>e||e>4||(this.colCountValue=e,this.fireCallback(this.colCountChangedCallback))},enumerable:!0,configurable:!0}),r.prototype.getRows=function(){for(var e=this.colCount,t=this.items,n=[],r=0,o=0;o<t.length;o++)0==r&&n.push([]),n[n.length-1].push(t[o]),r++,r>=e&&(r=0);return n},r.prototype.onValueChanged=function(){n.prototype.onValueChanged.call(this),this.onItemValueChanged()},r.prototype.createTextItem=function(e,n){return new t(e,n)},r.prototype.onItemValueChanged=function(){if(!this.isMultipleItemValueChanging)for(var e=0;e<this.items.length;e++){var t=null;
this.value&&this.items[e].name in this.value&&(t=this.value[this.items[e].name]),this.items[e].onValueChanged(t)}},r.prototype.runValidators=function(){var t=n.prototype.runValidators.call(this);if(null!=t)return t;for(var r=0;r<this.items.length;r++)if(t=(new e.ValidatorRunner).run(this.items[r]),null!=t)return t;return null},r.prototype.getMultipleTextValue=function(e){return this.value?this.value[e]:null},r.prototype.setMultipleTextValue=function(e,t){this.isMultipleItemValueChanging=!0;var n=this.value;n||(n={}),n[e]=t,this.setNewValue(n),this.isMultipleItemValueChanging=!1},r}(e.Question);e.QuestionMultipleTextModel=n,e.JsonObject.metaData.addClass("multipletextitem",["name",{name:"title",onGetValue:function(e){return e.titleValue}},{name:"validators:validators",baseClassName:"surveyvalidator",classNamePart:"validator"}],function(){return new t("")}),e.JsonObject.metaData.addClass("multipletext",[{name:"!items:textitems",className:"multipletextitem"},{name:"itemSize:number","default":25},{name:"colCount:number","default":1,choices:[1,2,3,4]}],function(){return new n("")},"question"),e.QuestionFactory.Instance.registerQuestion("multipletext",function(e){var t=new n(e);return t.AddItem("text1"),t.AddItem("text2"),t})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){t.call(this,e),this.name=e,this.rates=[],this.mininumRateDescription=null,this.maximumRateDescription=null}return __extends(n,t),Object.defineProperty(n.prototype,"rateValues",{get:function(){return this.rates},set:function(t){e.ItemValue.setData(this.rates,t),this.fireCallback(this.rateValuesChangedCallback)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visibleRateValues",{get:function(){return this.rateValues.length>0?this.rateValues:n.defaultRateValues},enumerable:!0,configurable:!0}),n.prototype.getType=function(){return"rating"},n.prototype.supportComment=function(){return!0},n.prototype.supportOther=function(){return!0},n.defaultRateValues=[],n}(e.Question);e.QuestionRatingModel=t,e.ItemValue.setData(t.defaultRateValues,[1,2,3,4,5]),e.JsonObject.metaData.addClass("rating",["hasComment:boolean",{name:"rateValues:itemvalues",onGetValue:function(t){return e.ItemValue.getData(t.rateValues)},onSetValue:function(e,t){e.rateValues=t}},"mininumRateDescription","maximumRateDescription"],function(){return new t("")},"question"),e.QuestionFactory.Instance.registerQuestion("rating",function(e){return new t(e)})}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(e){function t(){e.call(this),this.opValue="equal"}return __extends(t,e),Object.defineProperty(t,"operators",{get:function(){return null!=t.operatorsValue?t.operatorsValue:(t.operatorsValue={empty:function(e,t){return!e},notempty:function(e,t){return!!e},equal:function(e,t){return e==t},notequal:function(e,t){return e!=t},contains:function(e,t){return e&&e.indexOf&&e.indexOf(t)>-1},notcontains:function(e,t){return!e||!e.indexOf||-1==e.indexOf(t)},greater:function(e,t){return e>t},less:function(e,t){return t>e},greaterorequal:function(e,t){return e>=t},lessorequal:function(e,t){return t>=e}},t.operatorsValue)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"operator",{get:function(){return this.opValue},set:function(e){e&&(e=e.toLowerCase(),t.operators[e]&&(this.opValue=e))},enumerable:!0,configurable:!0}),t.prototype.check=function(e){t.operators[this.operator](e,this.value)?this.onSuccess():this.onFailure()},t.prototype.onSuccess=function(){},t.prototype.onFailure=function(){},t.operatorsValue=null,t}(e.Base);e.Trigger=t;var n=function(e){function t(){e.call(this),this.owner=null}return __extends(t,e),t.prototype.setOwner=function(e){this.owner=e},Object.defineProperty(t.prototype,"isOnNextPage",{get:function(){return!1},enumerable:!0,configurable:!0}),t}(t);e.SurveyTrigger=n;var r=function(e){function t(){e.call(this),this.pages=[],this.questions=[]}return __extends(t,e),t.prototype.getType=function(){return"visibletrigger"},t.prototype.onSuccess=function(){this.onTrigger(this.onItemSuccess)},t.prototype.onFailure=function(){this.onTrigger(this.onItemFailure)},t.prototype.onTrigger=function(e){if(this.owner)for(var t=this.owner.getObjects(this.pages,this.questions),n=0;n<t.length;n++)e(t[n])},t.prototype.onItemSuccess=function(e){e.visible=!0},t.prototype.onItemFailure=function(e){e.visible=!1},t}(n);e.SurveyTriggerVisible=r;var o=function(e){function t(){e.call(this)}return __extends(t,e),t.prototype.getType=function(){return"completetrigger"},Object.defineProperty(t.prototype,"isOnNextPage",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.onSuccess=function(){this.owner&&this.owner.doComplete()},t}(n);e.SurveyTriggerComplete=o;var i=function(e){function t(){e.call(this)}return __extends(t,e),t.prototype.getType=function(){return"setvaluetrigger"},t.prototype.onSuccess=function(){this.setToName&&this.owner&&this.owner.setTriggerValue(this.setToName,this.setValue,this.isVariable)},t}(n);e.SurveyTriggerSetValue=i,e.JsonObject.metaData.addClass("trigger",["operator","!value"]),e.JsonObject.metaData.addClass("surveytrigger",["!name"],null,"trigger"),e.JsonObject.metaData.addClass("visibletrigger",["pages","questions"],function(){return new r},"surveytrigger"),e.JsonObject.metaData.addClass("completetrigger",[],function(){return new o},"surveytrigger"),e.JsonObject.metaData.addClass("setvaluetrigger",["!setToName","setValue","isVariable:boolean"],function(){return new i},"surveytrigger")}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(n){void 0===n&&(n=null),t.call(this),this.surveyId=null,this.surveyPostId=null,this.clientId=null,this.cookieName=null,this.sendResultOnPageNext=!1,this.commentPrefix="-Comment",this.title="",this.showNavigationButtons=!0,this.showTitle=!0,this.showPageTitles=!0,this.completedHtml="",this.requiredText="*",this.questionStartIndex="",this.questionTitleTemplate="",this.showProgressBar="off",this.storeOthersAsComment=!0,this.goNextPageAutomatic=!1,this.pages=new Array,this.triggers=new Array,this.clearInvisibleValues=!1,this.currentPageValue=null,this.valuesHash={},this.variablesHash={},this.showPageNumbersValue=!1,this.showQuestionNumbersValue="on",this.localeValue="",this.isCompleted=!1,this.isLoading=!1,this.processedTextValues={},this.onComplete=new e.Event,this.onCurrentPageChanged=new e.Event,this.onValueChanged=new e.Event,this.onVisibleChanged=new e.Event,this.onPageVisibleChanged=new e.Event,this.onQuestionAdded=new e.Event,this.onQuestionRemoved=new e.Event,this.onValidateQuestion=new e.Event,this.onProcessHtml=new e.Event,this.onSendResult=new e.Event,this.onGetResult=new e.Event,this.onUploadFile=new e.Event,this.jsonErrors=null,this.mode="normal";var r=this;this.textPreProcessor=new e.TextPreProcessor,this.textPreProcessor.onHasValue=function(e){return r.processedTextValues[e.toLowerCase()]},this.textPreProcessor.onProcess=function(e){return r.getProcessedTextValue(e)},this.pages.push=function(e){return e.data=r,Array.prototype.push.call(this,e)},this.triggers.push=function(e){return e.setOwner(r),Array.prototype.push.call(this,e)},this.updateProcessedTextValues(),this.onBeforeCreating(),n&&(this.setJsonObject(n),this.surveyId&&this.loadSurveyFromService(this.surveyId)),this.onCreating()}return __extends(n,t),n.prototype.getType=function(){return"survey"},Object.defineProperty(n.prototype,"locale",{get:function(){return this.localeValue},set:function(t){this.localeValue=t,e.surveyLocalization.currentLocale=t},enumerable:!0,configurable:!0}),n.prototype.getLocString=function(t){return e.surveyLocalization.getString(t)},Object.defineProperty(n.prototype,"emptySurveyText",{get:function(){return this.getLocString("emptySurvey")},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pagePrevText",{get:function(){return this.pagePrevTextValue?this.pagePrevTextValue:this.getLocString("pagePrevText")},set:function(e){this.pagePrevTextValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"pageNextText",{get:function(){return this.pageNextTextValue?this.pageNextTextValue:this.getLocString("pageNextText")},set:function(e){this.pageNextTextValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"completeText",{get:function(){return this.completeTextValue?this.completeTextValue:this.getLocString("completeText")},set:function(e){this.completeTextValue=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showPageNumbers",{get:function(){return this.showPageNumbersValue},set:function(e){e!==this.showPageNumbers&&(this.showPageNumbersValue=e,this.updateVisibleIndexes())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"showQuestionNumbers",{get:function(){return this.showQuestionNumbersValue},set:function(e){e!==this.showQuestionNumbers&&(this.showQuestionNumbersValue=e,this.updateVisibleIndexes())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"data",{get:function(){var e={};for(var t in this.valuesHash)e[t]=this.valuesHash[t];return e},set:function(e){if(this.valuesHash={},e)for(var t in e)this.valuesHash[t]=e[t],this.checkTriggers(t,e[t],!1);this.notifyAllQuestionsOnValueChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"comments",{get:function(){var e={};for(var t in this.valuesHash)t.indexOf(this.commentPrefix)>0&&(e[t]=this.valuesHash[t]);return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visiblePages",{get:function(){if(this.isDesignMode)return this.pages;for(var e=new Array,t=0;t<this.pages.length;t++)this.pages[t].isVisible&&e.push(this.pages[t]);return e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isEmpty",{get:function(){return 0==this.pages.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"PageCount",{get:function(){return this.pages.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"visiblePageCount",{get:function(){return this.visiblePages.length},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"currentPage",{get:function(){var e=this.visiblePages;return null!=this.currentPageValue&&e.indexOf(this.currentPageValue)<0&&(this.currentPage=null),null==this.currentPageValue&&e.length>0&&(this.currentPage=e[0]),this.currentPageValue},set:function(e){var t=this.visiblePages;if(!(null!=e&&t.indexOf(e)<0)&&e!=this.currentPageValue){var n=this.currentPageValue;this.currentPageValue=e,this.currentPageChanged(e,n),this.currentPageValue&&this.currentPageValue.scrollToFirstQuestion()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this.isLoading?"loading":this.isCompleted?"completed":this.currentPage?"running":"empty"},enumerable:!0,configurable:!0}),n.prototype.clear=function(){this.data=null,this.variablesHash={},this.isCompleted=!1,this.visiblePageCount>0&&(this.currentPage=this.visiblePages[0])},n.prototype.mergeValues=function(e,t){if(t&&e)for(var n in e){var r=e[n];r&&"object"==typeof r?(t[n]||(t[n]={}),this.mergeValues(r,t[n])):t[n]=r}},n.prototype.currentPageChanged=function(e,t){this.onCurrentPageChanged.fire(this,{oldCurrentPage:t,newCurrentPage:e})},n.prototype.getProgress=function(){if(null==this.currentPage)return 0;var e=this.visiblePages.indexOf(this.currentPage)+1;return Math.ceil(100*e/this.visiblePageCount)},Object.defineProperty(n.prototype,"isDesignMode",{get:function(){return"designer"==this.mode},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"hasCookie",{get:function(){if(!this.cookieName)return!1;var e=document.cookie;return e&&e.indexOf(this.cookieName+"=true")>-1},enumerable:!0,configurable:!0}),n.prototype.setCookie=function(){this.cookieName&&(document.cookie=this.cookieName+"=true; expires=Fri, 31 Dec 9999 0:0:0 GMT")},n.prototype.deleteCookie=function(){this.cookieName&&(document.cookie=this.cookieName+"=;")},n.prototype.nextPage=function(){if(this.isLastPage)return!1;if(this.isCurrentPageHasErrors)return!1;this.checkOnPageTriggers(),this.sendResultOnPageNext&&this.clientId&&this.sendResult(this.surveyPostId,this.clientId,!0);var e=this.visiblePages,t=e.indexOf(this.currentPage);return this.currentPage=e[t+1],!0},Object.defineProperty(n.prototype,"isCurrentPageHasErrors",{get:function(){return null==this.currentPage?!0:this.currentPage.hasErrors(!0,!0)},enumerable:!0,configurable:!0}),n.prototype.prevPage=function(){if(this.isFirstPage)return!1;var e=this.visiblePages,t=e.indexOf(this.currentPage);this.currentPage=e[t-1]},n.prototype.completeLastPage=function(){return this.isCurrentPageHasErrors?!1:(this.doComplete(),!0)},Object.defineProperty(n.prototype,"isFirstPage",{get:function(){return null==this.currentPage?!0:0==this.visiblePages.indexOf(this.currentPage)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLastPage",{get:function(){if(null==this.currentPage)return!0;var e=this.visiblePages;return e.indexOf(this.currentPage)==e.length-1},enumerable:!0,configurable:!0}),n.prototype.doComplete=function(){this.clearInvisibleValues&&this.clearInvisibleQuestionValues(),this.setCookie(),this.setCompleted(),this.onComplete.fire(this,null),this.surveyPostId&&this.sendResult()},n.prototype.setCompleted=function(){this.isCompleted=!0},Object.defineProperty(n.prototype,"processedCompletedHtml",{get:function(){return this.completedHtml?this.processHtml(this.completedHtml):"<h3>"+this.getLocString("completingSurvey")+"</h3>"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"processedLoadingHtml",{get:function(){return"<h3>"+this.getLocString("loadingSurvey")+"</h3>"},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"progressText",{get:function(){if(null==this.currentPage)return"";var e=this.visiblePages,t=e.indexOf(this.currentPage)+1;return this.getLocString("progressText").format(t,e.length)},enumerable:!0,configurable:!0}),n.prototype.uploadFile=function(e,t,n,r){var o=!0;return this.onUploadFile.fire(this,{name:e,file:t,accept:o}),o?(!n&&this.surveyPostId&&this.uploadFileCore(e,t,r),!0):!1},n.prototype.uploadFileCore=function(t,n,r){var o=this;r&&r("uploading"),(new e.dxSurveyService).sendFile(this.surveyPostId,n,function(e,n){r&&r(e?"success":"error"),e&&o.setValue(t,n)})},n.prototype.getPage=function(e){return this.pages[e]},n.prototype.addPage=function(e){null!=e&&(this.pages.push(e),this.updateVisibleIndexes())},n.prototype.addNewPage=function(e){var t=this.createNewPage(e);return this.addPage(t),t},n.prototype.removePage=function(e){var t=this.pages.indexOf(e);0>t||(this.pages.splice(t,1),this.currentPageValue==e&&(this.currentPage=this.pages.length>0?this.pages[0]:null),this.updateVisibleIndexes())},n.prototype.getQuestionByName=function(e,t){void 0===t&&(t=!1);var n=this.getAllQuestions();t&&(e=e.toLowerCase());for(var r=0;r<n.length;r++){var o=n[r].name;if(t&&(o=o.toLowerCase()),o==e)return n[r]}return null},n.prototype.getQuestionsByNames=function(e,t){void 0===t&&(t=!1);var n=[];if(!e)return n;for(var r=0;r<e.length;r++)if(e[r]){var o=this.getQuestionByName(e[r],t);o&&n.push(o)}return n},n.prototype.getPageByQuestion=function(e){for(var t=0;t<this.pages.length;t++){var n=this.pages[t];if(n.questions.indexOf(e)>-1)return n}return null},n.prototype.getPageByName=function(e){for(var t=0;t<this.pages.length;t++)if(this.pages[t].name==e)return this.pages[t];return null},n.prototype.getPagesByNames=function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++)if(e[n]){var r=this.getPageByName(e[n]);r&&t.push(r)}return t},n.prototype.getAllQuestions=function(e){void 0===e&&(e=!1);for(var t=new Array,n=0;n<this.pages.length;n++)this.pages[n].addQuestionsToList(t,e);return t},n.prototype.createNewPage=function(t){return new e.PageModel(t)},n.prototype.notifyQuestionOnValueChanged=function(e,t){for(var n=this.getAllQuestions(),r=null,o=0;o<n.length;o++)n[o].name==e&&(r=n[o],this.doSurveyValueChanged(r,t));this.onValueChanged.fire(this,{name:e,question:r,value:t})},n.prototype.notifyAllQuestionsOnValueChanged=function(){for(var e=this.getAllQuestions(),t=0;t<e.length;t++)this.doSurveyValueChanged(e[t],this.getValue(e[t].name))},n.prototype.doSurveyValueChanged=function(e,t){e.onSurveyValueChanged(t)},n.prototype.checkOnPageTriggers=function(){for(var e=this.getCurrentPageQuestions(),t=0;t<e.length;t++){var n=e[t],r=this.getValue(n.name);this.checkTriggers(n.name,r,!0)}},n.prototype.getCurrentPageQuestions=function(){var e=[],t=this.currentPage;if(!t)return e;for(var n=0;n<t.questions.length;n++){var r=t.questions[n];r.visible&&r.name&&e.push(r)}return e},n.prototype.checkTriggers=function(e,t,n){for(var r=0;r<this.triggers.length;r++){var o=this.triggers[r];o.name==e&&o.isOnNextPage==n&&o.check(t)}},n.prototype.sendResult=function(t,n,r){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=!1),!t&&this.surveyPostId&&(t=this.surveyPostId),t){n&&(this.clientId=n);var o=this;(new e.dxSurveyService).sendResult(t,this.data,function(e,t){o.onSendResult.fire(o,{success:e,response:t})},this.clientId,r)}},n.prototype.getResult=function(t,n){var r=this;(new e.dxSurveyService).getResult(t,n,function(e,t,n,o){r.onGetResult.fire(r,{success:e,data:t,dataList:n,response:o})})},n.prototype.loadSurveyFromService=function(t){void 0===t&&(t=null),t&&(this.surveyId=t);var n=this;this.isLoading=!0,this.onLoadingSurveyFromService(),(new e.dxSurveyService).loadSurvey(this.surveyId,function(e,t,r){n.isLoading=!1,e&&t&&(n.setJsonObject(t),n.notifyAllQuestionsOnValueChanged(),n.onLoadSurveyFromService())})},n.prototype.onLoadingSurveyFromService=function(){},n.prototype.onLoadSurveyFromService=function(){},n.prototype.updateVisibleIndexes=function(){if(this.updatePageVisibleIndexes(this.showPageNumbers),"onPage"==this.showQuestionNumbers)for(var e=this.visiblePages,t=0;t<e.length;t++)this.updateQuestionVisibleIndexes(e[t].questions,!0);else this.updateQuestionVisibleIndexes(this.getAllQuestions(!1),"on"==this.showQuestionNumbers)},n.prototype.updatePageVisibleIndexes=function(e){for(var t=0,n=0;n<this.pages.length;n++)this.pages[n].visibleIndex=this.pages[n].visible?t++:-1,this.pages[n].num=e&&this.pages[n].visible?this.pages[n].visibleIndex+1:-1},n.prototype.updateQuestionVisibleIndexes=function(e,t){for(var n=0,r=0;r<e.length;r++)e[r].setVisibleIndex(t&&e[r].visible&&e[r].hasTitle?n++:-1)},n.prototype.setJsonObject=function(t){if(t){this.jsonErrors=null;var n=new e.JsonObject;n.toObject(t,this),n.errors.length>0&&(this.jsonErrors=n.errors),this.updateProcessedTextValues(),this.hasCookie&&this.doComplete(),this.updateVisibleIndexes()}},n.prototype.onBeforeCreating=function(){},n.prototype.onCreating=function(){},n.prototype.updateProcessedTextValues=function(){this.processedTextValues={};var e=this;this.processedTextValues.pageno=function(t){return null!=e.currentPage?e.visiblePages.indexOf(e.currentPage)+1:0},this.processedTextValues.pagecount=function(t){return e.visiblePageCount};for(var t=this.getAllQuestions(),n=0;n<t.length;n++)this.addQuestionToProcessedTextValues(t[n])},n.prototype.addQuestionToProcessedTextValues=function(e){this.processedTextValues[e.name.toLowerCase()]="question"},n.prototype.getProcessedTextValue=function(e){var e=e.toLowerCase(),t=this.processedTextValues[e];if(!t)return null;if("question"==t){var n=this.getQuestionByName(e,!0);return null!=n?this.getValue(n.name):null}return"value"==t?this.getValue(e):"variable"==t?this.getVariable(e):t(e)},n.prototype.clearInvisibleQuestionValues=function(){for(var e=this.getAllQuestions(),t=0;t<e.length;t++)e[t].visible||this.setValue(e[t].name,null)},n.prototype.getVariable=function(e){return e?this.variablesHash[e]:null},n.prototype.setVariable=function(e,t){e&&(this.variablesHash[e]=t,this.processedTextValues[e.toLowerCase()]="variable")},n.prototype.getUnbindValue=function(e){return e&&e instanceof Object?JSON.parse(JSON.stringify(e)):e},n.prototype.getValue=function(e){if(!e||0==e.length)return null;var t=this.valuesHash[e];return this.getUnbindValue(t)},n.prototype.setValue=function(e,t){this.isValueEqual(e,t)||(""==t||null==t?delete this.valuesHash[e]:(t=this.getUnbindValue(t),this.valuesHash[e]=t,this.processedTextValues[e.toLowerCase()]="value"),this.notifyQuestionOnValueChanged(e,t),this.checkTriggers(e,t,!1),this.tryGoNextPageAutomatic())},n.prototype.isValueEqual=function(e,t){""==t&&(t=null);var n=this.getValue(e);return null===t||null===n?t===n:this.isTwoValueEquals(t,n)},n.prototype.isTwoValueEquals=function(e,t){if(e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;for(var n in e)if(e.hasOwnProperty(n)){if(!t.hasOwnProperty(n))return!1;if(e[n]!==t[n]){if("object"!=typeof e[n])return!1;if(!this.isTwoValueEquals(e[n],t[n]))return!1}}for(n in t)if(t.hasOwnProperty(n)&&!e.hasOwnProperty(n))return!1;return!0},n.prototype.tryGoNextPageAutomatic=function(){if(this.goNextPageAutomatic&&this.currentPage){for(var e=this.getCurrentPageQuestions(),t=0;t<e.length;t++)if(!this.getValue(e[t].name))return;this.currentPage.hasErrors(!1,!1)||(this.isLastPage?this.doComplete():this.nextPage())}},n.prototype.getComment=function(e){var t=this.data[e+this.commentPrefix];return null==t&&(t=""),t},n.prototype.setComment=function(e,t){e+=this.commentPrefix,""==t||null==t?delete this.valuesHash[e]:(this.valuesHash[e]=t,this.tryGoNextPageAutomatic())},n.prototype.questionVisibilityChanged=function(e,t){this.updateVisibleIndexes(),this.onVisibleChanged.fire(this,{question:e,name:e.name,visible:t})},n.prototype.pageVisibilityChanged=function(e,t){this.updateVisibleIndexes(),this.onPageVisibleChanged.fire(this,{page:e,visible:t})},n.prototype.questionAdded=function(e,t){this.updateVisibleIndexes(),this.addQuestionToProcessedTextValues(e),this.onQuestionAdded.fire(this,{question:e,name:e.name,index:t})},n.prototype.questionRemoved=function(e){this.updateVisibleIndexes(),this.onQuestionRemoved.fire(this,{question:e,name:e.name})},n.prototype.validateQuestion=function(t){if(this.onValidateQuestion.isEmpty)return null;var n={name:t,value:this.getValue(t),error:null};return this.onValidateQuestion.fire(this,n),n.error?new e.CustomError(n.error):null},n.prototype.processHtml=function(e){var t={html:e};return this.onProcessHtml.fire(this,t),this.processText(t.html)},n.prototype.processText=function(e){return this.textPreProcessor.process(e)},n.prototype.getObjects=function(e,t){var n=[];return Array.prototype.push.apply(n,this.getPagesByNames(e)),Array.prototype.push.apply(n,this.getQuestionsByNames(t)),n},n.prototype.setTriggerValue=function(e,t,n){e&&(n?this.setVariable(e,t):this.setValue(e,t))},n}(e.Base);e.SurveyModel=t,e.JsonObject.metaData.addClass("survey",[{name:"locale",choices:function(){return e.surveyLocalization.getLocales()}},"title","completedHtml:html",{name:"pages",className:"page"},{name:"questions",baseClassName:"question",onGetValue:function(e){return null},onSetValue:function(e,t,n){var r=e.addNewPage("");n.toObject({questions:t},r)}},{name:"triggers:triggers",baseClassName:"surveytrigger",classNamePart:"trigger"},"surveyId","surveyPostId","cookieName","sendResultOnPageNext:boolean",{name:"showNavigationButtons:boolean","default":!0},{name:"showTitle:boolean","default":!0},{name:"showPageTitles:boolean","default":!0},"showPageNumbers:boolean",{name:"showQuestionNumbers","default":"on",choices:["on","onPage","off"]},{name:"showProgressBar","default":"off",choices:["off","top","bottom"]},{name:"storeOthersAsComment:boolean","default":!0},"goNextPageAutomatic:boolean","clearInvisibleValues:boolean",{name:"pagePrevText",onGetValue:function(e){return e.pagePrevTextValue}},{name:"pageNextText",onGetValue:function(e){return e.pageNextTextValue}},{name:"completeText",onGetValue:function(e){return e.completeTextValue}},{name:"requiredText","default":"*"},"questionStartIndex","questionTitleTemplate"])}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},Survey;!function(e){var t=function(t){function n(e){t.call(this),this.surveyValue=this.createSurvey(e),this.surveyValue.showTitle=!1,this.windowElement=document.createElement("div")}return __extends(n,t),n.prototype.getType=function(){return"window"},Object.defineProperty(n.prototype,"survey",{get:function(){return this.surveyValue},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isShowing",{get:function(){return this.isShowingValue},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isExpanded",{get:function(){return this.isExpandedValue},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.titleValue?this.titleValue:this.survey.title},set:function(e){this.titleValue=e},enumerable:!0,configurable:!0}),n.prototype.expand=function(){this.expandcollapse(!0)},n.prototype.collapse=function(){this.expandcollapse(!1)},n.prototype.createSurvey=function(t){return new e.SurveyModel(t)},n.prototype.expandcollapse=function(e){this.isExpandedValue=e},n.surveyElementName="windowSurveyJS",n}(e.Base);e.SurveyWindowModel=t}(Survey||(Survey={}));var Survey;!function(e){var t={pagePrevText:"Edellinen",pageNextText:"Seuraava",completeText:"Valmis",otherItemText:"Muu (kuvaile)",progressText:"Sivu {0}/{1}",emptySurvey:"Tss kyselyss ei ole yhtkn nkyvill olevaa sivua tai kysymyst.",completingSurvey:"Kiitos kyselyyn vastaamisesta!",loadingSurvey:"Kysely ladataan palvelimelta...",optionsCaption:"Valitse...",requiredError:"Vastaa kysymykseen, kiitos.",numericError:"Arvon tulee olla numeerinen.",textMinLength:"Ole hyv ja syt vhintn {0} merkki.",minSelectError:"Ole hyv ja valitse vhintn {0} vaihtoehtoa.",maxSelectError:"Ole hyv ja valitse enintn {0} vaihtoehtoa.",numericMinMax:"'{0}' tytyy olla enemmn tai yht suuri kuin {1} ja vhemmn tai yht suuri kuin {2}",numericMin:"'{0}' tytyy olla enemmn tai yht suuri kuin {1}",numericMax:"'{0}' tytyy olla vhemmn tai yht suuri kuin {1}",invalidEmail:"Syt validi shkpostiosoite.",otherRequiredError:'Ole hyv ja syt "Muu (kuvaile)"'};e.surveyLocalization.locales.fi=t}(Survey||(Survey={}));var Survey;!function(e){var t={pagePrevText:"Prcdent",pageNextText:"Suivant",completeText:"Terminer",otherItemText:"Autre (prciser)",progressText:"Page {0} sur {1}",emptySurvey:"Il n'y a ni page visible ni question visible dansce questionnaire",completingSurvey:"Merci d'avoir rpondu au questionnaire!",loadingSurvey:"Le questionnaire est en cours de chargement...",optionsCaption:"Choisissez...",requiredError:"La rponse  cette question est obligatoire.",numericError:"La rponse doit tre un nombre.",textMinLength:"Merci d'entrer au moins {0} symboles.",minSelectError:"Merci de slectionner au moins {0}rponses.",maxSelectError:"Merci de slectionner au plus {0}rponses.",numericMinMax:"Votre rponse '{0}' doit tresuprieure ou gale  {1} et infrieure ougale  {2}",numericMin:"Votre rponse '{0}' doit tresuprieure ou gale  {1}",numericMax:"Votre rponse '{0}' doit treinfrieure ou gale  {1}",invalidEmail:"Merci d'entrer une adresse mail valide.",exceedMaxSize:"La taille du fichier ne doit pas excder {0}.",otherRequiredError:"Merci de prciser le champ 'Autre'."};e.surveyLocalization.locales.fr=t}(Survey||(Survey={}));var Survey;!function(e){var t={pagePrevText:"Zurck",pageNextText:"Weiter",completeText:"Fertig",progressText:"Seite {0} von {1}",emptySurvey:"Es gibt keine sichtbare Frage.",completingSurvey:"Vielen Dank fr das Ausfllen des Fragebogens!",loadingSurvey:"Der Fragebogen wird vom Server geladen...",otherItemText:"Benutzerdefinierte Antwort...",optionsCaption:"Whlen...",requiredError:"Bitte antworten Sie auf die Frage.",numericError:"Der Wert sollte eine Zahl sein.",textMinLength:"Bitte geben Sie mindestens {0} Symbole.",minSelectError:"Bitte whlen Sie mindestens {0} Varianten.",maxSelectError:"Bitte whlen Sie nicht mehr als {0} Varianten.",numericMinMax:"'{0}' solte gleich oder grer sein als {1} und gleich oder kleiner als {2}",numericMin:"'{0}' solte gleich oder grer sein als {1}",numericMax:"'{0}' solte gleich oder kleiner als {1}",invalidEmail:"Bitte geben Sie eine gltige Email-Adresse ein.",exceedMaxSize:"Die Dateigre soll nicht mehr als {0}.",otherRequiredError:"Bitte geben Sie einen Wert fr Ihre benutzerdefinierte Antwort ein."};e.surveyLocalization.locales.de=t}(Survey||(Survey={}));var Survey;!function(e){var t={pagePrevText:"",pageNextText:"",completeText:"",progressText:" {0}  {1}",emptySurvey:"   .",completingSurvey:"    !",loadingSurvey:"  ...",otherItemText:" (, )",optionsCaption:"...",requiredError:",   .",numericError:"   .",textMinLength:",    {0} .",minSelectError:",    {0} .",maxSelectError:",    {0} .",numericMinMax:"'{0}'     ,  {1},    ,  {2}",numericMin:"'{0}'     ,  {1}",numericMax:"'{0}'     ,  {1}",invalidEmail:",     .",otherRequiredError:',     ""'};e.surveyLocalization.locales.ru=t}(Survey||(Survey={}));var Survey;!function(e){e.defaultStandardCss={root:"sv_main",header:"",body:"sv_body",footer:"sv_nav",navigationButton:"",progress:"sv_progress",pageTitle:"sv_p_title",question:{root:"sv_q",title:"sv_q_title",comment:"",indent:20},error:{root:"sv_q_erbox",item:""},checkbox:{root:"sv_qcbc",item:"sv_q_checkbox",other:"sv_q_other"},comment:"",dropdown:"",matrix:{root:"sv_q_matrix"},matrixdropdown:{root:"sv_q_matrix"},matrixdynamic:{root:"table",button:""},multipletext:{root:"",itemTitle:"",itemValue:""},radiogroup:{root:"sv_qcbc",item:"sv_q_radiogroup",other:"sv_q_other"},rating:{root:"sv_q_rating",item:""},text:""}}(Survey||(Survey={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestioncomment=function(e){function t(t){e.call(this,t),this.question=t.question,this.css=t.css,this.state={value:this.question.value},this.handleOnChange=this.handleOnChange.bind(this)}return __extends(t,e),t.prototype.handleOnChange=function(e){this.question.value=e.target.value,this.setState({value:this.question.value})},t.prototype.componentWillReceiveProps=function(e){this.question=e.question},t.prototype.render=function(){return this.question?React.createElement("textarea",{className:this.css,type:"text",value:this.state.value,onChange:this.handleOnChange,cols:this.question.cols,rows:this.question.rows}):null},t}(React.Component),ReactSurveyQuestionCommentItem=function(e){function t(t){e.call(this,t),this.question=t.question,this.css=t.css,this.comment=this.question.comment,this.state={value:this.comment},this.handleOnChange=this.handleOnChange.bind(this),this.handleOnBlur=this.handleOnBlur.bind(this)}return __extends(t,e),t.prototype.handleOnChange=function(e){this.comment=e.target.value,this.setState({
value:this.comment})},t.prototype.handleOnBlur=function(e){this.question.comment=this.comment},t.prototype.componentWillReceiveProps=function(e){this.question=e.question},t.prototype.render=function(){return this.question?React.createElement("input",{type:"text",className:this.css.question.comment,value:this.state.value,onChange:this.handleOnChange,onBlur:this.handleOnBlur}):null},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestion=function(e){function t(t){e.call(this,t),this.setQuestion(t.question),this.creator=t.creator,this.css=t.css}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.creator=e.creator,this.css=e.css,this.setQuestion(e.question)},t.prototype.setQuestion=function(e){this.questionBase=e,this.question=e instanceof Survey.Question?e:null;var t=this.question?this.question.value:null;this.state={visible:this.questionBase.visible,value:t,error:0}},t.prototype.render=function(){if(!this.questionBase||!this.creator)return null;if(this.questionBase.react=this,!this.questionBase.visible)return null;var e=("ReactSurveyQuestion"+this.questionBase.getType(),this.creator.createQuestionElement(this.questionBase)),t=this.questionBase.hasTitle?this.renderTitle():null,n=this.question&&this.question.hasComment?this.renderComment():null,r=this.renderErrors(),o=this.questionBase.indent>0?this.questionBase.indent*this.css.question.indent+"px":null,i=o?{marginLeft:o}:null;return React.createElement("div",{id:this.questionBase.id,className:this.css.question.root,style:i},t,r,e,n)},t.prototype.renderTitle=function(){var e=this.question.fullTitle;return React.createElement("h5",{className:this.css.question.title},e)},t.prototype.renderComment=function(){return React.createElement("div",null,React.createElement("div",null,this.question.commentText),React.createElement("div",{className:this.css.question.comment},React.createElement(ReactSurveyQuestionCommentItem,{question:this.question})))},t.prototype.renderErrors=function(){return React.createElement(ReactSurveyQuestionErrors,{question:this.question,css:this.css,creator:this.creator})},t}(React.Component),ReactSurveyQuestionErrors=function(e){function t(t){e.call(this,t),this.setQuestion(t.question),this.creator=t.creator,this.css=t.css}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.setQuestion(e.question),this.creator=e.creator,this.css=e.css},t.prototype.setQuestion=function(e){if(this.question=e instanceof Survey.Question?e:null,this.question){var t=this;this.question.errorsChangedCallback=function(){t.state.error=t.state.error+1,t.setState(t.state)}}this.state={error:0}},t.prototype.render=function(){if(!this.question||0==this.question.errors.length)return null;for(var e=[],t=0;t<this.question.errors.length;t++){var n=this.question.errors[t].getText(),r="error"+t;e.push(this.creator.renderError(r,n))}return React.createElement("div",{className:this.css.error.root},e)},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyPage=function(e){function t(t){e.call(this,t),this.page=t.page,this.survey=t.survey,this.creator=t.creator,this.css=t.css}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.page=e.page,this.survey=e.survey,this.creator=e.creator,this.css=e.css},t.prototype.render=function(){if(null!=this.page&&null!=this.survey&&null!=this.creator){for(var e=this.renderTitle(),t=[],n=0;n<this.page.questions.length;n++){var r=this.page.questions[n];t.push(this.createQuestion(r))}return React.createElement("div",null,e,t)}},t.prototype.createQuestion=function(e){return React.createElement(ReactSurveyQuestion,{key:e.name,question:e,creator:this.creator,css:this.css})},t.prototype.renderTitle=function(){if(!this.page.title||!this.survey.showPageTitles)return null;var e=this.page.processedTitle;return this.page.num>0&&(e=this.page.num+". "+e),React.createElement("h4",{className:this.css.pageTitle},e)},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestioncheckbox=function(e){function t(t){e.call(this,t),this.question=t.question,this.css=t.css,this.rootCss=t.rootCss}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.question=e.question,this.css=e.css,this.rootCss=e.rootCss},t.prototype.render=function(){return this.question?React.createElement("form",{className:this.css.root},this.getItems()):null},t.prototype.getItems=function(){for(var e=[],t=0;t<this.question.visibleChoices.length;t++){var n=this.question.visibleChoices[t],r="item"+t;e.push(this.renderItem(r,n))}return e},Object.defineProperty(t.prototype,"textStyle",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.renderItem=function(e,t){return React.createElement(ReactSurveyQuestioncheckboxItem,{key:e,question:this.question,css:this.css,rootCss:this.rootCss,item:t,textStyle:this.textStyle})},t}(React.Component),ReactSurveyQuestioncheckboxItem=function(e){function t(t){e.call(this,t),this.item=t.item,this.question=t.question,this.css=t.css,this.rootCss=t.rootCss,this.textStyle=t.textStyle,this.handleOnChange=this.handleOnChange.bind(this)}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.item=e.item,this.css=e.css,this.rootCss=e.rootCss,this.textStyle=e.textStyle,this.question=e.question},t.prototype.handleOnChange=function(e){var t=this.question.value;t||(t=[]);var n=t.indexOf(this.item.value);e.target.checked?0>n&&t.push(this.item.value):n>-1&&t.splice(n,1),this.question.value=t,this.setState({value:this.question.value})},t.prototype.render=function(){if(!this.item||!this.question)return null;var e=this.question.colCount>0?100/this.question.colCount+"%":"",t=0==this.question.colCount?"5px":"0px",n={marginRight:t};e&&(n.width=e);var r=this.question.value&&this.question.value.indexOf(this.item.value)>-1,o=this.item.value===this.question.otherItem.value&&r?this.renderOther():null;return this.renderCheckbox(r,n,o)},Object.defineProperty(t.prototype,"inputStyle",{get:function(){return{marginRight:"3px"}},enumerable:!0,configurable:!0}),t.prototype.renderCheckbox=function(e,t,n){return React.createElement("div",{className:this.css.item,style:t},React.createElement("label",{className:this.css.item},React.createElement("input",{type:"checkbox",style:this.inputStyle,checked:e,onChange:this.handleOnChange}),React.createElement("span",null,this.item.text)),n)},t.prototype.renderOther=function(){return React.createElement("div",{className:this.css.other},React.createElement(ReactSurveyQuestionCommentItem,{question:this.question,css:this.rootCss}))},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestiondropdown=function(e){function t(t){e.call(this,t),this.question=t.question,this.css=t.css,this.rootCss=t.rootCss,this.state={value:this.question.value},this.handleOnChange=this.handleOnChange.bind(this)}return __extends(t,e),t.prototype.handleOnChange=function(e){this.question.value=e.target.value,this.setState({value:this.question.value})},t.prototype.componentWillReceiveProps=function(e){this.question=e.question,this.css=e.css,this.rootCss=e.rootCss},t.prototype.render=function(){if(!this.question)return null;for(var e=[],t=0;t<this.question.visibleChoices.length;t++){var n=this.question.visibleChoices[t],r="item"+t,o=React.createElement("option",{key:r,value:n.value},n.text);e.push(o)}var i=this.question.value===this.question.otherItem.value?this.renderOther():null;return React.createElement("div",null,React.createElement("select",{className:this.css,value:this.state.value,onChange:this.handleOnChange},React.createElement("option",{value:""},this.question.optionsCaption),e),i)},t.prototype.renderOther=function(){var e={marginTop:"3px"};return React.createElement("div",{style:e},React.createElement(ReactSurveyQuestionCommentItem,{question:this.question,css:this.rootCss}))},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestionfile=function(e){function t(t){e.call(this,t),this.question=t.question,this.css=t.css,this.state={fileLoaded:0},this.handleOnChange=this.handleOnChange.bind(this)}return __extends(t,e),t.prototype.handleOnChange=function(e){var t=e.target||e.srcElement;window.FileReader&&(!t||!t.files||t.files.length<1||(this.question.loadFile(t.files[0]),this.setState({fileLoaded:this.state.fileLoaded+1})))},t.prototype.componentWillReceiveProps=function(e){this.question=e.question},t.prototype.render=function(){if(!this.question)return null;var e=this.renderImage();return React.createElement("div",null,React.createElement("input",{type:"file",onChange:this.handleOnChange}),e)},t.prototype.renderImage=function(){return this.question.previewValue?React.createElement("div",null,"  ",React.createElement("img",{src:this.question.previewValue,height:this.question.imageHeight,width:this.question.imageWidth})):null},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestionhtml=function(e){function t(t){e.call(this,t),this.question=t.question}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.question=e.question},t.prototype.render=function(){if(!this.question||!this.question.html)return null;var e={__html:this.question.processedHtml};return React.createElement("div",{dangerouslySetInnerHTML:e})},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestionmatrix=function(e){function t(t){e.call(this,t),this.question=t.question,this.css=t.css}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.question=e.question,this.css=e.css},t.prototype.render=function(){if(!this.question)return null;for(var e=this.question.hasRows?React.createElement("th",null):null,t=[],n=0;n<this.question.columns.length;n++){var r=this.question.columns[n],o="column"+n;t.push(React.createElement("th",{key:o},r.text))}for(var i=[],s=this.question.visibleRows,n=0;n<s.length;n++){var a=s[n],o="row"+n;i.push(React.createElement(ReactSurveyQuestionmatrixRow,{key:o,question:this.question,row:a}))}return React.createElement("table",{className:this.css.root},React.createElement("thead",null,React.createElement("tr",null,e,t)),React.createElement("tbody",null,i))},t}(React.Component),ReactSurveyQuestionmatrixRow=function(e){function t(t){e.call(this,t),this.question=t.question,this.row=t.row,this.handleOnChange=this.handleOnChange.bind(this)}return __extends(t,e),t.prototype.handleOnChange=function(e){this.row.value=e.target.value,this.setState({value:this.row.value})},t.prototype.componentWillReceiveProps=function(e){this.question=e.question,this.row=e.row},t.prototype.render=function(){if(!this.row)return null;for(var e=this.question.hasRows?React.createElement("td",null,this.row.text):null,t=[],n=0;n<this.question.columns.length;n++){var r=this.question.columns[n],o="value"+n,i=this.row.value==r.value,s=React.createElement("td",{key:o},React.createElement("input",{type:"radio",name:this.row.fullName,value:r.value,checked:i,onChange:this.handleOnChange}));t.push(s)}return React.createElement("tr",null,e,t)},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestionmatrixdropdown=function(e){function t(t){e.call(this,t),this.setProperties(t)}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.setProperties(e)},t.prototype.setProperties=function(e){this.question=e.question,this.css=e.css,this.rootCss=e.rootCss,this.creator=e.creator},t.prototype.render=function(){if(!this.question)return null;for(var e=[],t=0;t<this.question.columns.length;t++){var n=this.question.columns[t],r="column"+t,o=this.question.getColumnWidth(n),i=o?{minWidth:o}:{};e.push(React.createElement("th",{key:r,style:i},this.question.getColumnTitle(n)))}for(var s=[],a=this.question.visibleRows,t=0;t<a.length;t++){var u=a[t],r="row"+t;s.push(React.createElement(ReactSurveyQuestionmatrixdropdownRow,{key:r,row:u,css:this.css,rootCss:this.rootCss,creator:this.creator}))}var l=this.question.horizontalScroll?{overflowX:"scroll"}:{};return React.createElement("div",{style:l},React.createElement("table",{className:this.css.root},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null),e)),React.createElement("tbody",null,s)))},t}(React.Component),ReactSurveyQuestionmatrixdropdownRow=function(e){function t(t){e.call(this,t),this.setProperties(t)}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.setProperties(e)},t.prototype.setProperties=function(e){this.row=e.row,this.css=e.css,this.rootCss=e.rootCss,this.creator=e.creator},t.prototype.render=function(){if(!this.row)return null;for(var e=[],t=0;t<this.row.cells.length;t++){var n=this.row.cells[t],r=React.createElement(ReactSurveyQuestionErrors,{question:n.question,css:this.rootCss,creator:this.creator}),o=this.renderSelect(n);e.push(React.createElement("td",{key:"row"+t},r,o))}return React.createElement("tr",null,React.createElement("td",null,this.row.text),e)},t.prototype.renderSelect=function(e){return this.creator.createQuestionElement(e.question)},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestionmatrixdynamic=function(e){function t(t){e.call(this,t),this.setProperties(t)}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.setProperties(e)},t.prototype.setProperties=function(e){this.question=e.question,this.css=e.css,this.rootCss=e.rootCss,this.creator=e.creator;var t=this;this.state={rowCounter:0},this.question.rowCountChangedCallback=function(){t.state.rowCounter=t.state.rowCounter+1,t.setState(t.state)},this.handleOnRowAddClick=this.handleOnRowAddClick.bind(this)},t.prototype.handleOnRowAddClick=function(e){this.question.addRow()},t.prototype.render=function(){if(!this.question)return null;for(var e=[],t=0;t<this.question.columns.length;t++){var n=this.question.columns[t],r="column"+t,o=this.question.getColumnWidth(n),i=o?{minWidth:o}:{};e.push(React.createElement("th",{key:r,style:i},this.question.getColumnTitle(n)))}for(var s=[],a=this.question.visibleRows,t=0;t<a.length;t++){var u=a[t],r="row"+t;s.push(React.createElement(ReactSurveyQuestionmatrixdynamicRow,{key:r,row:u,question:this.question,index:t,css:this.css,rootCss:this.rootCss,creator:this.creator}))}var l=this.question.horizontalScroll?{overflowX:"scroll"}:{};return React.createElement("div",null,React.createElement("div",{style:l},React.createElement("table",{className:this.css.root},React.createElement("thead",null,React.createElement("tr",null,e,React.createElement("th",null))),React.createElement("tbody",null,s))),this.renderAddRowButton())},t.prototype.renderAddRowButton=function(){return React.createElement("input",{className:this.css.button,type:"button",onClick:this.handleOnRowAddClick,value:this.question.addRowText})},t}(React.Component),ReactSurveyQuestionmatrixdynamicRow=function(e){function t(t){e.call(this,t),this.setProperties(t)}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.setProperties(e)},t.prototype.setProperties=function(e){this.row=e.row,this.question=e.question,this.index=e.index,this.css=e.css,this.rootCss=e.rootCss,this.creator=e.creator,this.handleOnRowRemoveClick=this.handleOnRowRemoveClick.bind(this)},t.prototype.handleOnRowRemoveClick=function(e){this.question.removeRow(this.index)},t.prototype.render=function(){if(!this.row)return null;for(var e=[],t=0;t<this.row.cells.length;t++){var n=this.row.cells[t],r=React.createElement(ReactSurveyQuestionErrors,{question:n.question,css:this.rootCss,creator:this.creator}),o=this.renderQuestion(n);e.push(React.createElement("td",{key:"row"+t},r,o))}var i=this.renderButton();return e.push(React.createElement("td",{key:"row"+this.row.cells.length+1},i)),React.createElement("tr",null,e)},t.prototype.renderQuestion=function(e){return this.creator.createQuestionElement(e.question)},t.prototype.renderButton=function(){return React.createElement("input",{className:this.css.button,type:"button",onClick:this.handleOnRowRemoveClick,value:this.question.removeRowText})},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestionmultipletext=function(e){function t(t){e.call(this,t),this.question=t.question,this.css=t.css}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.question=e.question,this.css=e.css},t.prototype.render=function(){if(!this.question)return null;for(var e=this.question.getRows(),t=[],n=0;n<e.length;n++)t.push(this.renderRow("item"+n,e[n]));return React.createElement("table",{className:this.css.root},React.createElement("tbody",null,t))},t.prototype.renderRow=function(e,t){for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(React.createElement("td",{key:"label"+r},React.createElement("span",{className:this.css.itemTitle},o.title))),n.push(React.createElement("td",{key:"value"+r},this.renderItem(o)))}return React.createElement("tr",{key:e},n)},t.prototype.renderItem=function(e){return React.createElement(ReactSurveyQuestionmultipletextItem,{item:e,css:this.css})},t}(React.Component),ReactSurveyQuestionmultipletextItem=function(e){function t(t){e.call(this,t),this.item=t.item,this.css=t.css,this.state={value:this.item.value},this.handleOnChange=this.handleOnChange.bind(this)}return __extends(t,e),t.prototype.handleOnChange=function(e){this.item.value=e.target.value,this.setState({value:this.item.value})},t.prototype.componentWillReceiveProps=function(e){this.item=e.item,this.css=e.css},t.prototype.render=function(){if(!this.item)return null;var e={"float":"left"};return React.createElement("input",{className:this.css.itemValue,style:e,type:"text",value:this.state.value,onChange:this.handleOnChange})},Object.defineProperty(t.prototype,"mainClassName",{get:function(){return""},enumerable:!0,configurable:!0}),t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestionradiogroup=function(e){function t(t){e.call(this,t),this.question=t.question,this.css=t.css,this.rootCss=t.rootCss,this.handleOnChange=this.handleOnChange.bind(this)}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.question=e.question,this.css=e.css,this.rootCss=e.rootCss,this.handleOnChange=this.handleOnChange.bind(this)},t.prototype.handleOnChange=function(e){this.question.value=e.target.value,this.setState({value:this.question.value})},t.prototype.render=function(){return this.question?React.createElement("form",{className:this.css.root},this.getItems()):null},t.prototype.getItems=function(){for(var e=[],t=0;t<this.question.visibleChoices.length;t++){var n=this.question.visibleChoices[t],r="item"+t;e.push(this.renderItem(r,n))}return e},Object.defineProperty(t.prototype,"textStyle",{get:function(){return{marginLeft:"3px"}},enumerable:!0,configurable:!0}),t.prototype.renderItem=function(e,t){var n=this.question.colCount>0?100/this.question.colCount+"%":"",r=0==this.question.colCount?"5px":"0px",o={marginRight:r};n&&(o.width=n);var i=this.question.value==t.value,s=i&&t.value===this.question.otherItem.value?this.renderOther():null;return this.renderRadio(e,t,i,o,s)},t.prototype.renderRadio=function(e,t,n,r,o){return React.createElement("div",{key:e,className:this.css.item,style:r},React.createElement("label",{className:this.css.item},React.createElement("input",{type:"radio",checked:n,value:t.value,onChange:this.handleOnChange}),React.createElement("span",{style:this.textStyle},t.text)),o)},t.prototype.renderOther=function(){return React.createElement("div",{className:this.css.other},React.createElement(ReactSurveyQuestionCommentItem,{question:this.question,css:this.rootCss}))},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestiontext=function(e){function t(t){e.call(this,t),this.question=t.question,this.css=t.css,this.state={value:this.question.value},this.handleOnChange=this.handleOnChange.bind(this)}return __extends(t,e),t.prototype.handleOnChange=function(e){this.question.value=e.target.value,this.setState({value:this.question.value})},t.prototype.componentWillReceiveProps=function(e){this.question=e.question,this.css=e.css},t.prototype.render=function(){return this.question?React.createElement("input",{className:this.css,type:"text",value:this.question.value,onChange:this.handleOnChange}):null},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyModel=function(e){function t(t){void 0===t&&(t=null),e.call(this,t)}return __extends(t,e),t.prototype.render=function(){this.renderCallback&&this.renderCallback()},t.prototype.mergeCss=function(e,t){this.mergeValues(e,t)},t.prototype.onLoadSurveyFromService=function(){this.render()},t.prototype.onLoadingSurveyFromService=function(){this.render()},t}(Survey.SurveyModel),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyNavigation=function(e){function t(t){e.call(this,t),this.survey=t.survey,this.css=t.css,this.handlePrevClick=this.handlePrevClick.bind(this),this.handleNextClick=this.handleNextClick.bind(this),this.handleCompleteClick=this.handleCompleteClick.bind(this)}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.survey=e.survey,this.css=e.css},t.prototype.handlePrevClick=function(e){this.survey.prevPage()},t.prototype.handleNextClick=function(e){this.survey.nextPage()},t.prototype.handleCompleteClick=function(e){this.survey.completeLastPage()},t.prototype.render=function(){if(!this.survey)return null;var e=this.survey.isFirstPage?null:this.renderButton(this.handlePrevClick,this.survey.pagePrevText),t=this.survey.isLastPage?null:this.renderButton(this.handleNextClick,this.survey.pageNextText),n=this.survey.isLastPage?this.renderButton(this.handleCompleteClick,this.survey.completeText):null;return React.createElement("div",{className:this.css.footer},e,t,n)},t.prototype.renderButton=function(e,t){var n={marginRight:"5px"};return React.createElement("input",{className:this.css.navigationButton,style:n,type:"button",onClick:e,value:t})},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyBase=function(e){function t(t){if(e.call(this,t),this.css=this.createCssObject(),!this.css)throw"You should not return null for createCssObject() method.";this.updateSurvey(t)}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.updateSurvey(e)},t.prototype.render=function(){return"completed"==this.survey.state?this.renderCompleted():"loading"==this.survey.state?this.renderLoading():this.renderSurvey()},t.prototype.createCssObject=function(){return null},t.prototype.renderCompleted=function(){var e={__html:this.survey.processedCompletedHtml};return React.createElement("div",{dangerouslySetInnerHTML:e})},t.prototype.renderLoading=function(){var e={__html:this.survey.processedLoadingHtml};return React.createElement("div",{dangerouslySetInnerHTML:e})},t.prototype.renderSurvey=function(){var e=this.survey.title&&this.survey.showTitle?this.renderTitle():null,t=this.survey.currentPage?this.renderPage():null,n="top"==this.survey.showProgressBar?this.renderProgress(!0):null,r="bottom"==this.survey.showProgressBar?this.renderProgress(!1):null,o=t&&this.survey.showNavigationButtons?this.renderNavigation():null;return t||(t=this.renderEmptySurvey()),React.createElement("div",{className:this.css.root},e,React.createElement("div",{className:this.css.body},n,t,r),o)},t.prototype.renderTitle=function(){return React.createElement("div",{className:this.css.header},React.createElement("h3",null,this.survey.title))},t.prototype.renderPage=function(){return React.createElement(ReactSurveyPage,{survey:this.survey,page:this.survey.currentPage,css:this.css,creator:this})},t.prototype.renderProgress=function(e){return null},t.prototype.renderNavigation=function(){return React.createElement(ReactSurveyNavigation,{survey:this.survey,css:this.css})},t.prototype.renderEmptySurvey=function(){return React.createElement("span",null,this.survey.emptySurveyText)},t.prototype.updateSurvey=function(e){e?e.model?this.survey=e.model:e.json&&(this.survey=new ReactSurveyModel(e.json)):this.survey=new ReactSurveyModel,e&&(e.clientId&&(this.survey.clientId=e.clientId),e.data&&(this.survey.data=e.data),e.css&&this.survey.mergeCss(e.css,this.css));this.survey.currentPage;this.state={pageIndexChange:0,isCompleted:!1,modelChanged:0},this.setSurveyEvents(e)},t.prototype.setSurveyEvents=function(e){var t=this;this.survey.renderCallback=function(){t.state.modelChanged=t.state.modelChanged+1,t.setState(t.state)},this.survey.onComplete.add(function(e){t.state.isCompleted=!0,t.setState(t.state)}),this.survey.onCurrentPageChanged.add(function(n,r){t.state.pageIndexChange=t.state.pageIndexChange+1,t.setState(t.state),e&&e.onCurrentPageChanged&&e.onCurrentPageChanged(n,r)}),this.survey.onVisibleChanged.add(function(e,t){if(t.question&&t.question.react){var n=t.question.react.state;n.visible=t.question.visible,t.question.react.setState(n)}}),this.survey.onValueChanged.add(function(e,t){if(t.question&&t.question.react){var n=t.question.react.state;n.value=t.value,t.question.react.setState(n)}}),e&&(this.survey.onValueChanged.add(function(t,n){e.data&&(e.data[n.name]=n.value),e.onValueChanged&&e.onValueChanged(t,n)}),e.onComplete&&this.survey.onComplete.add(function(t){e.onComplete(t)}),this.survey.onPageVisibleChanged.add(function(t,n){e.onPageVisibleChanged&&e.onPageVisibleChanged(t,n)}),e.onQuestionAdded&&this.survey.onQuestionAdded.add(function(t,n){e.onQuestionAdded(t,n)}),e.onQuestionRemoved&&this.survey.onQuestionRemoved.add(function(t,n){e.onQuestionRemoved(t,n)}),e.onValidateQuestion&&this.survey.onValidateQuestion.add(function(t,n){e.onValidateQuestion(t,n)}),e.onSendResult&&this.survey.onSendResult.add(function(t,n){e.onSendResult(t,n)}),e.onGetResult&&this.survey.onGetResult.add(function(t,n){e.onGetResult(t,n)}),e.onProcessHtml&&this.survey.onProcessHtml.add(function(t,n){e.onProcessHtml(t,n)}))},t.prototype.getReactQuestionClass=function(e){var t="ReactSurveyQuestion"+e.getType();return window[t]},t.prototype.createQuestionElement=function(e){var t=this.css[e.getType()];return React.createElement(this.getReactQuestionClass(e),{question:e,css:t,rootCss:this.css,creator:this})},t.prototype.renderError=function(e,t){return React.createElement("div",{key:e,className:this.css.error.item},t)},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyProgressBase=function(e){function t(t){e.call(this,t),this.survey=t.survey,this.css=t.css,this.isTop=t.isTop}return __extends(t,e),t.prototype.componentWillReceiveProps=function(e){this.survey=e.survey,this.css=e.css,this.isTop=e.isTop},Object.defineProperty(t.prototype,"progress",{get:function(){return this.survey.getProgress()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"progressText",{get:function(){return this.survey.progressText},enumerable:!0,configurable:!0}),t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyQuestionrating=function(e){function t(t){e.call(this,t),this.question=t.question,this.css=t.css,this.rootCss=t.rootCss,this.handleOnChange=this.handleOnChange.bind(this)}return __extends(t,e),t.prototype.handleOnChange=function(e){this.question.value=e.target.value,this.setState({value:this.question.value})},t.prototype.componentWillReceiveProps=function(e){this.question=e.question,this.css=e.css,this.rootCss=e.rootCss},t.prototype.render=function(){if(!this.question)return null;for(var e=[],t=[],n=0;n<this.question.visibleRateValues.length;n++){var r="header"+n,o="value"+n,i=this.question.visibleRateValues[n];e.push(React.createElement("th",{key:r},i.text)),t.push(React.createElement("td",{key:o},React.createElement("input",{type:"radio",name:this.question.name,value:i.value,checked:this.question.value==i.value,onChange:this.handleOnChange})))}var s=this.question.hasOther?this.renderOther():null;return React.createElement("div",null,React.createElement("table",{className:this.css.root},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null),e,React.createElement("th",null))),React.createElement("tbody",null,React.createElement("tr",null,React.createElement("td",null,this.question.mininumRateDescription),t,React.createElement("td",null,this.question.maximumRateDescription)))),s)},t.prototype.renderOther=function(){return React.createElement("div",{className:this.css.other},React.createElement(ReactSurveyQuestionCommentItem,{question:this.question,css:this.rootCss}))},t}(React.Component),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyProgress=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.render=function(){var e=this.isTop?{}:{marginTop:"10px",marginBottom:"5px"};return React.createElement("div",{className:this.css.progress,style:e},this.progressText)},t}(ReactSurveyProgressBase),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurvey=function(e){function t(t){e.call(this,t)}return __extends(t,e),t.prototype.renderProgress=function(e){return React.createElement(ReactSurveyProgress,{survey:this.survey,css:this.css,isTop:e})},t.prototype.createCssObject=function(){return Survey.defaultStandardCss;
},t}(ReactSurveyBase),__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},ReactSurveyWindow=function(e){function t(t){e.call(this,t),this.handleOnExpanded=this.handleOnExpanded.bind(this)}return __extends(t,e),t.prototype.handleOnExpanded=function(e){this.state.expanded=!this.state.expanded,this.setState(this.state)},t.prototype.render=function(){if(this.state.hidden)return null;var e=this.renderHeader(),t=this.state.expanded?this.renderBody():null;return React.createElement("div",{className:"sv_window"},e,t)},t.prototype.renderHeader=function(){var e={width:"100%"};return React.createElement("div",{className:"sv_window_title"},React.createElement("a",{href:"#",onClick:this.handleOnExpanded,style:e},React.createElement("span",null,this.title)))},t.prototype.renderBody=function(){return React.createElement("div",{"class":"sv_window_content"},this.renderSurvey())},t.prototype.updateSurvey=function(t){e.prototype.updateSurvey.call(this,t),this.title=t.title?t.title:this.survey.title;var n=t.expanded?t.expanded:!1;this.state={expanded:n,hidden:!1};var r=this;this.survey.onComplete.add(function(e){r.state.hidden=!0,r.setState(r.state)})},t}(ReactSurvey);